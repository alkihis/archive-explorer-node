{"version":3,"sources":["components/shared/EmptyMessage/EmptyMessage.module.scss","components/Router/RouterWrapper.module.scss","components/vues/DMConversation/DMConversation.module.scss","components/shared/NoArchive/NoArchive.module.scss","assets/sign-in-with-twitter-link.png","assets/steps/2.png","assets/steps/3.png","assets/steps/4.png","assets/steps/5.png","assets/steps/6.png","assets/steps/7.png","assets/steps/8.png","components/vues/DirectMessages/DirectMessages.module.scss","components/vues/Archive/Archive.module.scss","components/vues/Search/Search.module.scss","components/shared/TweetViewer/TweetViewer.module.scss","components/shared/NoGDPR/NoGDPR.module.scss","components/vues/DMConversation/DM.module.scss","const.ts","serviceWorker.ts","tools/Settings.ts","tools/ApiHelper.ts","classes/Cache.ts","classes/UserCache.ts","components/shared/Toaster/Toaster.tsx","helpers.ts","tools/PlacingComponents.tsx","components/shared/EmptyMessage/EmptyMessage.tsx","components/shared/NoArchive/NoArchive.tsx","components/shared/Tweets/TweetMedia.tsx","components/shared/Tweets/TweetText.tsx","components/shared/Tweets/Tweet.tsx","classes/TweetCache.ts","tools/Tasks.ts","components/shared/TweetViewer/TweetViewer.tsx","components/shared/RespDrawer/RespDrawer.tsx","components/vues/Explore/Explore.tsx","components/vues/TaskModal/Task.tsx","components/vues/TaskModal/TaskModal.tsx","components/Router/RouterWrapper.tsx","components/vues/QuickDelete/QuickDelete.tsx","components/vues/Archive/Archive.tsx","components/vues/Login/Login.tsx","components/FinalizeLogin/FinalizeLogin.tsx","components/shared/NotFound/NotFound.tsx","components/vues/Settings/ExtendedActionsMenu.tsx","components/vues/Settings/Settings.tsx","components/shared/NoGDPR/NoGDPR.tsx","components/vues/DMConversation/DM.tsx","components/shared/Sentinel/Sentinel.tsx","components/vues/DMConversation/DMContainer.tsx","components/vues/DMConversation/DMConversation.tsx","components/vues/DirectMessages/DirectMessages.tsx","components/vues/Search/Search.tsx","components/Router/Router.tsx","components/App/App.tsx","index.tsx","components/vues/Settings/Settings.module.scss","components/vues/QuickDelete/QuickDelete.module.scss","components/vues/TaskModal/TaskModal.module.scss","components/vues/TaskModal/Task.module.scss","components/vues/Explore/Explore.module.scss","components/shared/Tweets/Tweet.module.scss","components/shared/Tweets/TweetMedia.module.scss","components/vues/Login/Login.module.scss","components/vues/Settings/ExtendedActions.module.scss","components/vues/DMConversation/DMContainer.module.scss"],"names":["module","exports","SERVER_URL","AUTO_TWITTER_CHECK","IMG_LIST","Boolean","window","location","hostname","match","SETTINGS","_token","_only_medias","_only_videos","_auto_tweet_download","_only_rts","_pp","_sort_reverse_chrono","current_user","current_archive","archive_name","archive_in_load","expired","twitter_user","localStorage","getItem","this","token","only_medias","only_videos","tweet_dl","only_rts","pp","sort_reverse_chrono","u","JSON","parse","isUserValid","user","removeItem","e","reload","revoke","is_logged","APIHELPER","request","method","finally","pathname","created_at","twitter_id","twitter_name","twitter_screen_name","v","setItem","String","stringify","archive","owner","DEBUG","settings","APIHelper","url","parameters","mode","body_mode","auth","fullurl","BASE_API_URL","endsWith","Object","keys","length","str","entries","key","value","fd","FormData","append","headers","Headers","buffer","push","encodeURIComponent","join","set","Authorization","console","warn","fetch","body","undefined","then","rq","ok","text","d","Promise","reject","get","json","catch","Array","isArray","Cache","id_field","cache","asked_by_empty","Set","CHUNK_LENGTH","MAX_THREADS","ids","events","document","createElement","ids_to_get","filter","has","ids_to_get_from_cache","getted","i","promises","chunk","slice","tinyBulk","data","id","dispatchEvent","CustomEvent","detail","downloaded","total","all","cached_user","getFromCache","bulk","api_res","returned","t","ids_recus","diff","unrecieved","add","tweet","UserCache","conv","participants","MyApp","enqueueSnackbar","useSnackbar","addEventListener","msg","variant","severity","Fragment","IntegrationNotistack","maxSnack","autoHideDuration","toast","setPageTitle","title","checkCredentials","a","auto_user_dl","check_twitter_account","reso","twitter","_","c","code","log","u_twi","user_id","status","dateFormatter","schema","date","Date","Y","getFullYear","N","getDay","n","getMonth","L","replacements","m","getDate","getMinutes","H","getHours","g","s","getSeconds","getMilliseconds","z","now","start","getTime","Math","floor","w","char","isArchiveLoaded","getMonthText","month","Number","uppercaseFirst","toLocaleUpperCase","filterTweets","tweets","sort_fn","BigInt","b","id_str","coll","Intl","Collator","numeric","compare","retweeted_status","entities","media","extended_entities","type","sort","unescapeTwi","replace","specialJoin","array","sep","final_joiner","CenterComponent","props","Grid","container","direction","justify","alignItems","children","BigPreloader","CircularProgress","style","width","height","thickness","internalError","message","additionnal_text","login_again","CardContent","Typography","gutterBottom","component","marginBottom","Button","onClick","logout","color","marginTop","marginRight","specialJoinJSX","options","assign","class_joiner","last","element","className","class_element","random","EmptyMessage","Icon","icon","classes","text_lighten","minWidth","textAlign","main","second","NoArchive","BlockIcon","to","archive_link","TweetMedia","state","image_full","map","alt","src","media_url_https","setState","full","video_info","variants","forEach","split","valids","bitrate","bitrates","better","indexOf","max","better_variants","about","video","loop","autoPlay","controls","image","obj","used_entity","renderVideo","image_url","full_img","Dialog","paper","onClose","open","renderImages","to_inject","rightClass","renderModal","root","React","Component","splitter","Graphene","TweetText","frags","user_mentions","indices","target","rel","screen_name","href","urls","display_url","expanded_url","hashtags","h","parts","original_t","original_string","splitGraphemes","full_text","last_end","begin","end","renderText","calculateFragments","TweetCheckbox","withStyles","checked","Checkbox","Tweet","user_pp","original","profile_image_url_https","avatar","avatar_name","name","Card","card","CardHeader","card_title","Avatar","action","retweeted","padding","link","subheader","renderMedia","CardActions","disableSpacing","card_action","onChange","oc","onCheckChange","disabled","can_delete","TweetDate","TweetCache","TaskManager","subscriptions","socket","__ready","socket_io_fail","io","reconnectionAttempts","autoConnect","resetSocketIo","tweets_ids","task","done","remaining","percentage","failed","subscribe","emit","makeEvent","remove","auto_reconnect","disconnect","removeAllListeners","initSocketIo","resolve","connect","on","refresh","error","info","values","EventTarget","defineEventAttribute","prototype","Tasks","tasks","DEFAULT_CHUNK_LEN","TweetViewer","references","chunk_len","has_more","current_page","scroller_key","delete_modal","selectible","selected","modal_confirm","onTweetCheckChange","bind","renderTweet","filters","some","medias","videos","rts","page","prev_props","current","check","uncheck","createRef","ref","delete","size","loader","loader_real","no_tweets","Link","closeConfirmModal","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","uncheckAll","modal_root","modal_grid_root","modal_selected","modal_select_all","checkAll","modal_unselect_all","modal_unselect_all_color","modal_delete_all","openConfirmModal","noTweetsProp","noTweetsState","warning","warningMessageFilter","confirmDeletionModal","askDeletionModal","warning_filters","card_container","pageStart","loadMore","p","loadTweets","hasMore","noTweetsLeft","useStyles","makeStyles","theme","createStyles","display","drawer","breakpoints","up","flexShrink","appBar","marginLeft","menuButton","spacing","toolbar","mixins","drawerPaper","drawerPaperFull","position","zIndex","content","flexGrow","no_pad","full_h","ResponsiveDrawer","handleDrawerToggle","mobileOpen","noPadding","AppBar","Toolbar","IconButton","aria-label","edge","noWrap","Hidden","smUp","implementation","Drawer","anchor","ModalProps","keepMounted","xsDown","ExpansionPanel","border","borderBottomLeftRadius","borderBottomRightRadius","boxShadow","borderBottom","margin","expanded","MuiExpansionPanel","Explore","loaded","index","years","y","year","months","ExpansionPanelSummary","expandIcon","year_count","ExpansionPanelDetails","listOfMonths","current_year","List","list_month","ListItem","button","selected_month","monthClicker","ListItemText","drawer_month","month_text","tweets_number","month_header","month_tweet_number","Divider","listOfYears","showActiveMonth","noMonthSelected","Task","base_panel","is_over","panel_over","is_subscribed","panel_sub","panel_unsub","color_icon","icon_green","icon_orange","icon_purple","completed","heading","header_info","toFixed","details","counts","LinearProgress","bar_over","bar","ExpansionPanelActions","onCancel","onSubChange","Transition","forwardRef","Slide","TaskModal","handleClose","handleProgress","subscribed","findIndex","handleRemove","unsub","is_sub","old","find","sub","unsubscribe","cancel","removeEventListener","ts","over_tasks","not_over","no_sub","no_sub_text","error_load","is_completed_tasks","is_running_unsub_task","generateSubscribed","generateUnSub","generateOverTasks","TimelineIcon","fullScreen","TransitionComponent","app_bar","nav_title","render_root","is_empty","loadingState","emptyTask","Container","generateTasks","RouterWrapper","pathMap","task_opens","tasks_running","internal_progress","handleTaskProgress","handleUnsubscribe","handleChange","handleModalOpen","handleModalClose","calculateCurrentValue","history","listen","Badge","badgeContent","renderModalTasks","BottomNavigation","showLabels","stick_to_bottom","bottom_bar","BottomNavigationAction","label","renderTaskIcon","withRouter","QuickDelete","step","nextStep","previousStep","startErase","selectMonth","archive_index","startsWith","selectAYear","selected_count","starter_container","starter_details","buttons_month","unselectAYear","FormGroup","FormControlLabel","control","is_selected","isYearSelected","header_container","icon_lens","generateMonthsOfYear","month_selector_root","count","generateYears","select_all_holder","selectAll","unselectAll","Stepper","activeStep","stepper","Step","StepLabel","stepName","taskStarter","monthSelector","dividers","renderStepper","actions","to_end","concat","Archive","active","quick_delete_open","loading_state","is_error","in_load","checkOnReadyArchive","onready","is_gdpr","clearFailCache","users_in_archive","rt","most_actives","cache_dl","prefetch","onerror","onzipready","ontweetsread","onwillreaddm","onwillreadextended","files","f","TwitterArchive","l","p1","p2","styles","filename","calcTruncated","full_name","bio","owner_screen_name","bold","dmsinfowrapper","dmsinfo","messages","is_owner","cannot_delete","getLoadingMessage","subtitle","querySelector","click","data-archive-input","loadArchive","hidden","buttonQuickDelete","scroll","modal_paper","inLoad","errorLoad","emptyArchive","modalQuickDelete","maxWidth","center","loadRightContent","loadButton","ReactDOM","findDOMNode","classes_a","Copyright","align","underline","legal_text","github_header","github_links","GithubLogo","IMG_CHOOSEN","github_container","github_img","github_text","backgroundImage","backgroundRepeat","backgroundSize","backgroundPosition","flexDirection","backgroundColor","palette","primary","form","wrapper","buttonSuccess","blue","buttonError","red","fabProgress","top","left","alignC","progress","twitterImg","Login","useState","loading","setLoading","success","setSuccess","setError","twitter_button","setLink","runGetter","oauth_token_secret","CssBaseline","item","xs","sm","md","Paper","elevation","square","catch_phrase","Fab","twitter_link","sign_in_twitter","twitter_img","Box","mt","FinalizeLogin","save_token_secret","oauth_token","oauth_verifier","query_string","search","params","has_token","login_data","renderWaiting","renderFailed","renderTokenMiss","NotFound","ExtendedActionsMenu","modal_token","modal_delete_1","modal_delete_2","delete_preloader","tokens","handleClick","event","currentTarget","openGestionToken","closeGestionToken","openModalOne","closeModalOne","openModalTwo","closeModalTwo","closeAndDelete","clear","panel","login_ip","last_use","revokeToken","revoke_btn","loader_sessions","generateSessions","dialog","generateBaseSessions","preloader","modalGestionToken","modalDeleteOne","modalDeleteConfirm","anchorEl","MenuItem","Settings","download","modal_open","FormControl","FormLabel","focused","changeMediaState","labelPlacement","changeVideoState","Tooltip","tooltip","big_text","popper","changeTweetSortReverse","changeTweetDLState","changeRTState","changePPState","acc_details","tn","sn","handleClickOpen","placement","account_icon","aria-describedby","modalLogout","tweetViewSettings","account_title","account_container","accountSettings","NoGDPR","steptitle","step2","step3","step4","step5","step6","step7","step8","closeModal","downloadGDPRText","openModal","DM","registered_urls","img","img_full","onDmClick","dm","mediaUrls","dmImageFromUrl","is_group","blob","URL","createObjectURL","revokeObjectURL","createdAtDate","senderId","is_you","you","root_you","root_other","showPp","marginT","msg_you","msg_other","no_img","pointer","msg_selected","generateText","showDate","recipientId","Sentinel","canLoadMore","observer","IntersectionObserver","intersectionRatio","onVisible","rootMargin","threshold","observe","old_props","triggerMore","DMContainer","current_page_bottom","current_page_top","has_bottom","has_top","dm_cache","dm_refs","scrollToSelected","from","scrollToDm","nextPage","msgs","getPage","next_page","backPage","dm_top_id","pages","dm_top","el","setTimeout","scrollIntoView","block","inline","showed","last_owner","actual","future","previous","divider","show_date","divider_text","fab_jump","borderTop","DMConversation","found","searchContent","conversation","handleSearchChange","handleDmClick","single","findMsgs","preventDefault","stopPropagation","scrollTo","RegExp","raw_index","years_sorted","back_btn","getBack","get_back_paper","get_back_icon","search_input","onSubmit","full_w","TextField","textField","search_btn","search_paper","no_msg","dms","real_participants","is_group_conversation","conv_header_img","profile_banner_url","msg_number","month_msg_number","showHeaderConv","inner_content","showActiveSearch","noSearchResults","DirectMessages","ready","active_tab","should_scroll","handleRemoveConversation","handleGetConv","scrollY","changeActiveTab","cached","oncardclick","s_name","card_root","card_single","avatar_holder","conv_name","conv_screen_name","messages_number","s_n","names","group_conv_container","group_conv","group_conv_screen_name","MailOutlineIcon","groups","singles","directs","tabs","Tabs","centered","Tab","conv_title","conv_container","renderConversation","preloader_msg","renderConversations","MailIcon","Search","searched","search_modal","c_i","regex","handleKeyPress","startSearch","getTextSearch","query","TweetSearcher","Error","operator","trim","checkboxes","form_control","onRegexChange","onCIChange","search_field_wrapper","text_field","onKeyPress","autoComplete","handleButtonClick","fontSize","RadioGroup","radio_group","onSortChange","Radio","title_p","presentation","arrow_wrapper","searchModal","arrowGetModal","tweet_wrapper","tweet_number_results","tweet_number","AppRouter","logged","will_validate","validation_status","apiError","path","exact","render","renderDialogLogin","routerLogged","unloggedRouter","App","Router","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.27105509.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"EmptyMessage_icon__28hQX\",\"text_lighten\":\"EmptyMessage_text_lighten__2oGlb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"stick_to_bottom\":\"RouterWrapper_stick_to_bottom__2z7zO\",\"bottom_bar\":\"RouterWrapper_bottom_bar__20_Fv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"DMConversation_root__3u0k2\",\"drawer\":\"DMConversation_drawer__gzlBn\",\"drawerPaper\":\"DMConversation_drawerPaper__D1_kw\",\"content\":\"DMConversation_content__iZhtD\",\"inner_content\":\"DMConversation_inner_content__eU5yl\",\"conv_header_img\":\"DMConversation_conv_header_img__DbPZa\",\"list_month\":\"DMConversation_list_month__hjJj6\",\"drawer_month\":\"DMConversation_drawer_month__2VYXw\",\"back_btn\":\"DMConversation_back_btn__24nfd\",\"get_back_paper\":\"DMConversation_get_back_paper__3D_Q1\",\"get_back_icon\":\"DMConversation_get_back_icon__2Qgr8\",\"selected_month\":\"DMConversation_selected_month__1S7Po\",\"no_msg\":\"DMConversation_no_msg__25XdH\",\"icon\":\"DMConversation_icon__2OXqc\",\"month_header\":\"DMConversation_month_header__3AvCB\",\"month_msg_number\":\"DMConversation_month_msg_number__1kGAO\",\"search_paper\":\"DMConversation_search_paper__35XfY\",\"search_btn\":\"DMConversation_search_btn___ccBF\",\"year_count\":\"DMConversation_year_count__2ZjjQ\",\"search_input\":\"DMConversation_search_input__1RyX4\",\"textField\":\"DMConversation_textField__19o43\",\"full_w\":\"DMConversation_full_w__c0SYZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"NoArchive_icon__1cl9n\",\"archive_link\":\"NoArchive_archive_link__25u_F\",\"text_lighten\":\"NoArchive_text_lighten__3dTSn\"};","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/2.67ca1e2d.png\";","module.exports = __webpack_public_path__ + \"static/media/3.fe94000b.png\";","module.exports = __webpack_public_path__ + \"static/media/4.5d7814ab.png\";","module.exports = __webpack_public_path__ + \"static/media/5.bf7822c2.png\";","module.exports = __webpack_public_path__ + \"static/media/6.87f885d3.png\";","module.exports = __webpack_public_path__ + \"static/media/7.5bec24ec.png\";","module.exports = __webpack_public_path__ + \"static/media/8.552d1322.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"DirectMessages_root__1ejl0\",\"conv_title\":\"DirectMessages_conv_title__3VbkA\",\"card_single\":\"DirectMessages_card_single__16QqA\",\"preloader\":\"DirectMessages_preloader__2-3dS\",\"preloader_msg\":\"DirectMessages_preloader_msg__xYz0Z\",\"card_root\":\"DirectMessages_card_root__3pAbO\",\"tabs\":\"DirectMessages_tabs__2OPgD\",\"avatar_holder\":\"DirectMessages_avatar_holder__Jbg8A\",\"messages_number\":\"DirectMessages_messages_number__2XwuJ\",\"conv_container\":\"DirectMessages_conv_container__23g93\",\"avatar\":\"DirectMessages_avatar__1FILW\",\"conv_name\":\"DirectMessages_conv_name__us4jN\",\"conv_screen_name\":\"DirectMessages_conv_screen_name__2a9tD\",\"group_conv_container\":\"DirectMessages_group_conv_container__2uP4r\",\"group_conv\":\"DirectMessages_group_conv__1cL8n\",\"group_conv_screen_name\":\"DirectMessages_group_conv_screen_name__3FSRf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Archive_root__2MOLs\",\"card\":\"Archive_card__3Ltut\",\"title\":\"Archive_title__n8KXl\",\"subtitle\":\"Archive_subtitle__3MWTR\",\"center\":\"Archive_center__2g_v9\",\"dmsinfowrapper\":\"Archive_dmsinfowrapper__3-zTD\",\"bold\":\"Archive_bold__k5UG2\",\"dmsinfo\":\"Archive_dmsinfo__3RtSA\",\"bio\":\"Archive_bio__592rU\",\"filename\":\"Archive_filename__1fLOM\",\"cannot_delete\":\"Archive_cannot_delete__17rc3\",\"modal_paper\":\"Archive_modal_paper__5tSFY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search_modal\":\"Search_search_modal__1gipl\",\"open\":\"Search_open__2Tfks\",\"tweet_wrapper\":\"Search_tweet_wrapper__1WgIc\",\"search_field_wrapper\":\"Search_search_field_wrapper__1BjC8\",\"search_btn\":\"Search_search_btn__1se_d\",\"radio_group\":\"Search_radio_group__1Y6zx\",\"checkboxes\":\"Search_checkboxes__3_oQZ\",\"text_field\":\"Search_text_field__27afT\",\"form_control\":\"Search_form_control__24kH_\",\"arrow_wrapper\":\"Search_arrow_wrapper__1IFdy\",\"presentation\":\"Search_presentation__3a8IU\",\"title_p\":\"Search_title_p__GM7hi\",\"tweet_number_results\":\"Search_tweet_number_results__3wSU8\",\"tweet_number\":\"Search_tweet_number__iSBke\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card_container\":\"TweetViewer_card_container__gifck\",\"no_tweets\":\"TweetViewer_no_tweets__1JS2X\",\"icon\":\"TweetViewer_icon__Jcs3m\",\"loader\":\"TweetViewer_loader__hlkSx\",\"loader_real\":\"TweetViewer_loader_real__2jiyi\",\"archive_link\":\"TweetViewer_archive_link__2RM-Y\",\"warning_filters\":\"TweetViewer_warning_filters__Qv6TT\",\"modal_root\":\"TweetViewer_modal_root__2aTTZ\",\"open\":\"TweetViewer_open__1cqFb\",\"modal_grid_root\":\"TweetViewer_modal_grid_root__C47lz\",\"modal_unselect_all_color\":\"TweetViewer_modal_unselect_all_color__dmmuR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"NoGDPR_icon__2k5hR\",\"link\":\"NoGDPR_link__2MOP3\",\"text_lighten\":\"NoGDPR_text_lighten__3yZ7w\",\"steptitle\":\"NoGDPR_steptitle__Sw2Ku\",\"step\":\"NoGDPR_step__1-iyS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"DM_root__HpiTH\",\"root_other\":\"DM_root_other__xGpKQ\",\"root_you\":\"DM_root_you__3dacY\",\"msg\":\"DM_msg__3RrpC\",\"msg_you\":\"DM_msg_you__2v8yD\",\"no_img\":\"DM_no_img__18X5X\",\"msg_other\":\"DM_msg_other__1p9Zn\",\"msg_selected\":\"DM_msg_selected___IGuU\",\"lighten\":\"DM_lighten__2BWx8\",\"date\":\"DM_date__2mSqv\",\"img\":\"DM_img__3GfGc\",\"avatar\":\"DM_avatar__2zuDf\",\"marginT\":\"DM_marginT__c7-jl\",\"position\":\"DM_position__3FmCk\",\"you\":\"DM_you__15NfU\",\"full_img\":\"DM_full_img__38X2J\",\"paper\":\"DM_paper__1XdUM\",\"pointer\":\"DM_pointer__LE8tr\"};","export const VERSION = \"0.1.0\";\nexport const THRESHOLD_PREFETCH = 20;\n// export const SERVER_URL = \"http://localhost:3128\";\nexport const SERVER_URL = \"https://beta.archive-explorer.fr\";\nexport const AUTO_TWITTER_CHECK = true;\nexport const DEBUG_MODE = false;\n\nexport const IMG_PREFIX = \"/assets/\";\nexport const IMG_LIST: string[] = [\n  \"1.jpg\",\n  \"2.jpg\",\n  \"3.jpg\",\n  \"4.jpg\",\n  \"5.jpg\",\n];\n\ndeclare global {\n  interface Window {\n    DEBUG: any;\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { IUser } from \"./interfaces\";\nimport { TwitterArchive } from \"twitter-archive-reader\";\nimport { FullUser } from \"twitter-d\";\nimport { DEBUG_MODE } from \"../const\";\nimport APIHELPER from \"./ApiHelper\";\n\nclass AESettings {\n  // Saved settings\n  protected _token: string = \"\";\n  protected _only_medias: boolean = false;\n  protected _only_videos = false;\n  protected _auto_tweet_download = false;\n  protected _only_rts = false;\n  protected _pp = true;\n  protected _sort_reverse_chrono = true;\n\n  // Globals\n  protected current_user: IUser | null = null;\n  protected current_archive: TwitterArchive | null = null;\n\n  archive_name: string = \"\";\n  archive_in_load = \"\";\n  expired = false;\n\n  twitter_user: FullUser | undefined;\n\n  constructor() {\n    if (localStorage.getItem('login_token')) {\n      this.token = localStorage.getItem('login_token');\n    }\n    if (localStorage.getItem('only_medias')) {\n      this.only_medias = localStorage.getItem('only_medias') === \"true\";\n    }\n    if (localStorage.getItem('only_videos')) {\n      this.only_videos = localStorage.getItem('only_videos') === \"true\";\n    }\n    if (localStorage.getItem('auto_tweet_download')) {\n      this.tweet_dl = localStorage.getItem('auto_tweet_download') === \"true\";\n    }\n    if (localStorage.getItem('only_rts')) {\n      this.only_rts = localStorage.getItem('only_rts') === \"true\";\n    }\n    if (localStorage.getItem('pp')) {\n      this.pp = localStorage.getItem('pp') === \"true\";\n    }\n    if (localStorage.getItem('sort_reverse_chrono')) {\n      this.sort_reverse_chrono = localStorage.getItem('sort_reverse_chrono') === \"true\";\n    }\n    if (localStorage.getItem('current_user')) {\n      try {\n        const u = JSON.parse(localStorage.getItem('current_user'));\n\n        if (this.isUserValid(u)) {\n          this.user = u;\n        }\n        else {\n          localStorage.removeItem('current_user');\n        }\n      } catch (e) {\n        localStorage.removeItem('current_user');\n      }\n    }\n  }\n\n  get sort_reverse_chrono() {\n    return this._sort_reverse_chrono;\n  }\n\n  set sort_reverse_chrono(v: boolean) {\n    this._sort_reverse_chrono = v;\n    localStorage.setItem('sort_reverse_chrono', String(v));\n  }\n\n  get pp() {\n    return this._pp;\n  }\n\n  set pp(v: boolean) {\n    this._pp = v;\n    localStorage.setItem('pp', String(v));\n  }\n\n  get token() {\n    return this._token;\n  }\n\n  set token(v: string) {\n    this._token = v;\n    localStorage.setItem('login_token', v);\n  }\n\n  get only_medias() {\n    return this._only_medias;\n  }\n\n  set only_medias(v: boolean) {\n    this._only_medias = v;\n    localStorage.setItem('only_medias', String(v));\n  }\n\n  get only_videos() {\n    return this._only_videos;\n  }\n\n  set only_videos(v: boolean) {\n    this._only_videos = v;\n    localStorage.setItem('only_videos', String(v));\n  }\n\n  get only_rts() {\n    return this._only_rts;\n  }\n\n  set only_rts(v: boolean) {\n    this._only_rts = v;\n    localStorage.setItem('only_rts', String(v));\n  }\n\n  get tweet_dl() {\n    return this._auto_tweet_download;\n  }\n\n  set tweet_dl(v: boolean) {\n    this._auto_tweet_download = v;\n    localStorage.setItem('auto_tweet_download', String(v));\n  }\n\n  set user(v: IUser) {\n    this.current_user = v;\n    localStorage.setItem('current_user', JSON.stringify(v));\n  }\n\n  get user() {\n    return this.current_user;\n  }\n\n  set archive(v: TwitterArchive | null) {\n    this.current_archive = v;\n  }\n\n  get archive() {\n    return this.current_archive;\n  }\n\n  get is_owner() {\n    return !!this.archive && this.archive.owner === this.user.twitter_id;\n  }\n\n  get can_delete() {\n    if (DEBUG_MODE)\n      return true;\n\n    return !!this.archive && this.archive.owner === this.user.twitter_id && !this.expired;\n  }\n\n  get is_logged() {\n    return !!this.token;\n  }\n\n  logout(reload = true, revoke = false) {\n    const is_logged = this.is_logged;\n\n    if (revoke && is_logged) {\n      // Revoke without specifing token: revoking current\n      return APIHELPER.request('users/tokens/revoke', { method: 'POST' })\n        .finally(() => {\n          this.token = \"\";\n\n          if (reload)\n            this.reload();\n        });\n    }\n    else {\n      this.token = \"\";\n\n      if (reload)\n        this.reload();\n    }\n  }\n\n  reload() {\n    window.location.pathname = '/';\n  }\n\n  protected isUserValid(u: IUser) {\n    if (u.created_at && u.twitter_id && u.twitter_name && u.twitter_screen_name) {\n      return true;\n    }\n    return false;\n  }\n}\n\nconst SETTINGS = new AESettings;\n\nexport default SETTINGS;\n\n//// DEBUG\nwindow.DEBUG.settings = SETTINGS;\n","import SETTINGS from \"./Settings\";\nimport { SERVER_URL } from \"../const\";\n\nexport class APIHelper {\n  request(\n    url: string,\n    settings: {\n      parameters?: { [key: string]: any },\n      method: \"GET\" | \"POST\",\n      mode?: 'json' | 'text',\n      headers?: { [key: string]: string } | Headers,\n      body_mode?: 'form-encoded' | 'multipart' | 'json',\n      auth?: boolean\n    } = { \n      method: 'GET',\n      parameters: {}, \n      mode: 'json',\n      body_mode: 'form-encoded',\n      auth: true\n    }\n  ): Promise<any> {\n    let fullurl = BASE_API_URL + url + (url.endsWith('.json') ? \"\" : \".json\");\n\n    if (!settings.parameters) {\n      settings.parameters = {};\n    }\n\n    // Build parameters\n    if (Object.keys(settings.parameters).length) {\n      // Encodage dans la query\n      if (settings.method === \"GET\") {\n        let str = \"?\";\n        for (const [key, value] of Object.entries(settings.parameters)) {\n          str += key + \"=\" + value;\n        }\n        fullurl += str;\n      }\n      // Encodage POST (dans le body)\n      else {\n        var fd: FormData | string;\n        // Si multipart (formdata)\n        if (settings.body_mode && settings.body_mode === \"multipart\") {\n          fd = new FormData;\n  \n          for (const [key, value] of Object.entries(settings.parameters)) {\n            fd.append(key, value);\n          }\n        }\n        // Si www-form-encoded (ou par défault)\n        else if (!settings.body_mode || settings.body_mode === \"form-encoded\") {\n          const buffer: string[] = [];\n\n          for (const [key, value] of Object.entries(settings.parameters)) {\n            buffer.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(value));\n          }\n\n          fd = buffer.join('&');\n\n          if (settings.headers) {\n            if (settings.headers instanceof Headers)\n              settings.headers.append('Content-Type', 'application/x-www-form-urlencoded');\n            else\n              settings.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n          }\n          else {\n            settings.headers = {\n              'Content-Type': 'application/x-www-form-urlencoded'\n            };\n          }\n        }\n        // Sinon (json)\n        else {\n          fd = JSON.stringify(settings.parameters);\n\n          if (settings.headers) {\n            if (settings.headers instanceof Headers)\n              settings.headers.append('Content-Type', 'application/json');\n            else\n              settings.headers['Content-Type'] = 'application/json';\n          }\n          else {\n            settings.headers = {\n              'Content-Type': 'application/json'\n            };\n          }\n        }\n      }\n    }\n\n    if (settings.auth !== false) {\n      if (!SETTINGS.token) {\n        console.warn(\"Could not authentificate request without token. Skipping auth header...\");\n      }\n      else {\n        if (settings.headers) {\n          if (settings.headers instanceof Headers) \n            settings.headers.set('Authorization', \"Bearer \" + SETTINGS.token);\n          else\n            settings.headers['Authorization'] = \"Bearer \" + SETTINGS.token;\n        }\n        else {\n          settings.headers = {\n            Authorization: \"Bearer \" + SETTINGS.token\n          };\n        }\n      }\n    }\n\n    return fetch(fullurl, {\n      method: settings.method ? settings.method : \"GET\",\n      body: (fd ? fd : undefined),\n      headers: settings.headers\n    })\n      .then(rq => {\n        if (!settings.mode || settings.mode === \"json\") {\n          if (rq.headers.get('Content-Length') === \"0\") {\n            return {};\n          }\n\n          return (rq.ok ? \n            rq.json() : \n            rq.json()\n              .catch(e => Promise.reject([rq, e]))\n              .then(d => Array.isArray(d) ? Promise.reject(d) : Promise.reject([rq, d]))\n          );\n        }\n        else {\n          return rq.ok ? rq.text() : rq.text().then(d => Promise.reject([rq, d]));\n        }\n      });\n  }\n}\n\nexport const BASE_API_URL = SERVER_URL + \"/api/\";\n\nconst APIHELPER = new APIHelper;\n\nexport default APIHELPER;\n","import APIHELPER from \"../tools/ApiHelper\";\n\nexport class Cache<T> {\n  protected cache: {\n    [id: string]: T\n  } = {};\n\n  protected asked_by_empty: Set<string> = new Set;\n\n  protected readonly CHUNK_LENGTH = 100;\n  protected readonly MAX_THREADS = 5;\n\n  constructor(protected url: string, protected id_field = \"id_str\") { }\n\n  async bulk(ids: string[], events: EventTarget = document.createElement('div')) {\n    const ids_to_get = ids.filter(u => !this.has(u) && !this.asked_by_empty.has(u));\n    const ids_to_get_from_cache = ids.filter(u => this.has(u));\n\n    let getted: { [id: string]: T } = {};\n\n    // Si il y a des IDs à récupérer\n    if (ids_to_get.length) {\n      let i = 0;\n\n      let promises: Promise<void>[] = [];\n      while (i < ids_to_get.length) {\n        const chunk = ids_to_get.slice(i, i + this.CHUNK_LENGTH);\n\n        promises.push(\n          this.tinyBulk(chunk)\n            .then(data => {\n              for (const [id, v] of Object.entries(data)) {\n                getted[id] = v;\n              }\n\n              events.dispatchEvent(new CustomEvent('progress', { detail: {\n                downloaded: Object.keys(getted).length,\n                total: ids_to_get.length\n              }}));\n            })\n        );\n\n        if (promises.length >= this.MAX_THREADS) {\n          await Promise.all(promises);\n          promises = [];\n        }\n\n        i += this.CHUNK_LENGTH;\n      }\n\n      await Promise.all(promises);\n    }\n\n    // On récupère les tweets déjà en cache pour les ajouter à l'objet\n    for (const cached_user of ids_to_get_from_cache) {\n      getted[cached_user] = this.getFromCache(cached_user);\n    }\n\n    return getted;\n  }\n\n  async prefetch(ids: string[]) {\n    await this.bulk(ids);\n  }\n\n  protected async tinyBulk(ids: string[]) {\n    const api_res: T[] = await APIHELPER.request(this.url, {\n      method: 'POST',\n      parameters: { ids },\n      body_mode: \"json\",\n      auth: true\n    });\n\n    const returned: { [id: string]: T } = {};\n\n    for (const t of api_res) {\n      // @ts-ignore\n      returned[t[this.id_field]] = t;\n    }\n\n    // On met à jour le cache\n    for (const [id, v] of Object.entries(returned)) {\n      this.cache[id] = v;\n    }\n\n    // Check quels ids étaient demandés mais non reçus\n    const ids_recus = new Set(Object.keys(returned));\n    const diff = ids.filter(e => !ids_recus.has(e));\n\n    for (const unrecieved of diff) {\n      this.asked_by_empty.add(unrecieved);\n    }\n    \n    return returned;\n  }\n\n  async get(id: string) {\n    if (this.has(id)) {\n      return this.getFromCache(id);\n    }\n\n    const tweet = await this.tinyBulk([id]);\n\n    if (id in tweet) {\n      return tweet[id];\n    }\n\n    return null;\n  }\n\n  getFromCache(id: string) {\n    return this.cache[id];\n  }\n\n  protected has(id: string) {\n    return id in this.cache;\n  }\n\n  clearFailCache() {\n    this.asked_by_empty = new Set;\n  }\n}\n\nexport default Cache;\n","import { FullUser } from 'twitter-d';\nimport { Conversation } from 'twitter-archive-reader';\nimport Cache from './Cache';\n\nclass __UserCache extends Cache<FullUser> {\n  /** User informations about the participants (warning: it requires a fetch()) */\n  twitterParticipants(conv: Conversation) : Promise<{ [userId: string]: FullUser }> {\n    return UserCache.bulk([...conv.participants]);\n  }\n}\n\nexport const UserCache = new __UserCache('batch/users');\nexport default UserCache;\n","import React from 'react';\nimport { SnackbarProvider, useSnackbar } from 'notistack';\n\nexport interface ToasterMessage { \n  msg: string, \n  severity: 'success' | 'info' | 'warning' | 'error' | 'default' \n}\n\nfunction MyApp() {\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleEvent = (e: CustomEvent<ToasterMessage>) => {\n    enqueueSnackbar(e.detail.msg, { variant: e.detail.severity });\n  };\n\n  // @ts-ignore\n  window.addEventListener('toaster.message', handleEvent);\n\n  return (\n    <React.Fragment />\n  );\n}\n\nexport default function IntegrationNotistack() {\n  return (\n    <SnackbarProvider maxSnack={3} autoHideDuration={4000}>\n      <MyApp />\n    </SnackbarProvider>\n  );\n}\n\nexport function toast(msg: string, severity?: 'success' | 'info' | 'warning' | 'error' | 'default') {\n  window.dispatchEvent(new CustomEvent('toaster.message', { detail: {\n    msg,\n    severity: severity ? severity : \"default\"\n  }}));\n}\n","import APIHELPER from \"./tools/ApiHelper\";\nimport { IUser } from \"./tools/interfaces\";\nimport SETTINGS from \"./tools/Settings\";\nimport { PartialTweet } from \"twitter-archive-reader\";\nimport UserCache from \"./classes/UserCache\";\nimport DMArchive from \"twitter-archive-reader\";\nimport { toast } from \"./components/shared/Toaster/Toaster\";\nimport { FullUser } from \"twitter-d\";\nimport { AUTO_TWITTER_CHECK } from \"./const\";\n\nexport function setPageTitle(title?: string) {\n  document.title = \"Archive Explorer\" + (title ? ` - ${title}` : '');\n}\n\nexport async function checkCredentials(auto_user_dl = true, check_twitter_account = AUTO_TWITTER_CHECK) {\n  try {\n    const reso: IUser = await APIHELPER.request('users/credentials');\n    SETTINGS.user = reso;\n\n    if (check_twitter_account) {\n      const twitter_check = APIHELPER.request('users/twitter');\n\n      twitter_check\n        .then((d: { user: IUser, twitter: FullUser }) => {\n          SETTINGS.twitter_user = d.twitter;\n        })\n        .catch((e: any) => {\n          if (Array.isArray(e)) {\n            const [_, c] = e as [Response, any];\n      \n            if (c) {\n              if (c.code === 11) {\n                // Token expiré\n                SETTINGS.expired = true;\n                toast(\"Twitter credentials have expired. Please log out and log in again.\", \"error\");\n                return;\n              }\n              \n              // Unknown error\n              console.log(_, c);\n              return;\n            }\n          }\n      \n          // API unavailable (fetch promise reject), or other error\n          toast(\"Twitter account can't be verified. You may be unable to delete tweets.\", \"warning\");\n        });\n    }\n\n    if (reso.twitter_id && auto_user_dl) {\n      if (UserCache.getFromCache(reso.twitter_id)) {\n        SETTINGS.twitter_user = UserCache.getFromCache(reso.twitter_id);\n      }\n      else {\n        try {\n          const u_twi = await UserCache.get(reso.twitter_id);\n\n          if (u_twi) {\n            SETTINGS.twitter_user = u_twi;\n          }\n        } catch (e) { /* do nothing, l'utilisateur peut ne pas exister */ }\n      }\n    }\n\n    return !!reso.user_id;\n  } catch (e) {\n    if (Array.isArray(e)) {\n      const [rq, c] = e as [Response, any];\n\n      if (rq) {\n        if (rq.status === 403 || rq.status === 401) {\n          // Login invalid\n          return false;\n        }\n        \n        // Unknown error\n        console.log(rq, c);\n      }\n    }\n\n    // API unavailable (fetch promise reject), or other error\n    return null;\n  }\n}\n\nexport function dateFromTweet(tweet: PartialTweet) : Date {\n  if ('created_at_d' in tweet) {\n    return tweet.created_at_d;\n  }\n  return tweet.created_at_d = new Date(tweet.created_at);\n}\n\nexport function prefetchAllUserData(archive: DMArchive) {\n  const sets: Set<string>[] = archive.messages.all.map(e => e.participants);\n\n  const users = new Set<string>();\n\n  for (const s of sets) {\n    for (const u of s) {\n      users.add(u);\n    }\n  }\n\n  if (users.size)\n    return UserCache.bulk([...users]);\n\n  return Promise.resolve();\n}\n\n/**\n * Formate un objet Date en chaîne de caractères potable.\n * Pour comprendre les significations des lettres du schéma, se référer à : http://php.net/manual/fr/function.date.php\n * @param schema string Schéma de la chaîne. Supporte Y, m, d, g, H, i, s, n, N, v, z, w\n * @param date Date Date depuis laquelle effectuer le formatage\n * @returns string La chaîne formatée\n */\nexport function dateFormatter(schema: string, date = new Date()) : string {\n  function getDayOfTheYear(now: Date) : number {\n      const start = new Date(now.getFullYear(), 0, 0);\n      const diff = now.getTime() - start.getTime();\n      const oneDay = 1000 * 60 * 60 * 24;\n      const day = Math.floor(diff / oneDay);\n      \n      return day - 1; // Retourne de 0 à 364/365\n  }\n\n  const Y = date.getFullYear();\n  const N = date.getDay() === 0 ? 7 : date.getDay();\n  const n = date.getMonth() + 1;\n  const m = (n < 10 ? \"0\" : \"\") + String(n);\n  const d = ((date.getDate()) < 10 ? \"0\" : \"\") + String(date.getDate());\n  const L = Y % 4 === 0 ? 1 : 0;\n\n  const i = ((date.getMinutes()) < 10 ? \"0\" : \"\") + String(date.getMinutes());\n  const H = ((date.getHours()) < 10 ? \"0\" : \"\") + String(date.getHours());\n  const g = date.getHours();\n  const s = ((date.getSeconds()) < 10 ? \"0\" : \"\") + String(date.getSeconds());\n\n  const replacements: any = {\n      Y, m, d, i, H, g, s, n, N, L, v: date.getMilliseconds(), z: getDayOfTheYear, w: date.getDay()\n  };\n\n  let str = \"\";\n\n  // Construit la chaîne de caractères\n  for (const char of schema) {\n      if (char in replacements) {\n          if (typeof replacements[char] === 'string') {\n              str += replacements[char];\n          }\n          else if (typeof replacements[char] === 'number') {\n              str += String(replacements[char]);\n          }\n          else {\n              str += String(replacements[char](date));\n          }\n      }\n      else {\n          str += char;\n      }\n  }\n\n  return str;\n}\n\nexport function isArchiveLoaded() {\n  return !!SETTINGS.archive_name;\n}\n\nexport function getMonthText(month: string) {\n  const m = Number(month);\n\n  switch (m) {\n    case 1:\n      return \"January\";\n    case 2:\n      return \"February\";\n    case 3:\n      return \"March\";\n    case 4:\n      return \"April\";\n    case 5:\n      return \"May\";\n    case 6:\n      return \"June\";\n    case 7:\n      return \"July\";\n    case 8:\n      return \"August\";\n    case 9:\n      return \"September\";\n    case 10:\n      return \"October\";\n    case 11:\n      return \"November\";\n    case 12:\n      return \"December\";\n  }\n}\n\nexport function uppercaseFirst(str: string) {\n  return str.slice(0, 1).toLocaleUpperCase() + str.slice(1);\n}\n\n/**\n * Filter and sort tweets\n * \n * @param tweets \n */\nexport function filterTweets(tweets: PartialTweet[]) {\n  let sort_fn: (a: PartialTweet, b: PartialTweet) => number; \n  \n  if (typeof BigInt !== 'undefined') {\n    sort_fn = SETTINGS.sort_reverse_chrono ? \n    (a: PartialTweet, b: PartialTweet) => Number(BigInt(b.id_str) - BigInt(a.id_str)) :\n    (a: PartialTweet, b: PartialTweet) => Number(BigInt(a.id_str) - BigInt(b.id_str));\n  }\n  else {\n    // Does not support BigInt, fallback to Collator (TO TEST TODO)\n    const coll = new Intl.Collator(undefined, { numeric: true });\n    \n    sort_fn = (a: PartialTweet, b: PartialTweet) => (SETTINGS.sort_reverse_chrono ? \n      coll.compare(b.id_str, a.id_str) :\n      coll.compare(a.id_str, b.id_str)\n    );\n  }\n\n  return tweets.filter(t => {\n    if (SETTINGS.only_rts && !t.retweeted_status) {\n      return false;\n    }\n\n    if (SETTINGS.only_medias && (!t.entities || !t.entities.media || !t.entities.media.length)) {\n      return false;\n    }\n\n    if (SETTINGS.only_videos) {\n      if (\n        !t.extended_entities || \n        !t.extended_entities.media || \n        !t.extended_entities.media.length\n      ) {\n        return false;\n      }\n\n      if (t.extended_entities.media[0].type === \"photo\") {\n        return false;\n      }\n    }\n\n    return true;\n  }).sort(sort_fn)\n}\n\nexport function isFilterApplied() {\n  return SETTINGS.only_medias || SETTINGS.only_medias || SETTINGS.only_videos;\n}\n\nexport function escapeRegExp(string: string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n\nexport function unescapeTwi(str: string) {\n  return str.replace(/&gt;/g, \">\").replace(/&lt;/g, \"<\");\n}\n\nexport function specialJoin(array: string[], sep = \", \", final_joiner = \" and \") : string {\n  if (array.length < 2) {\n    return array.join(sep);\n  }\n\n  return array.slice(0, array.length - 1).join(sep) + final_joiner + array[array.length - 1];\n}\n","import React from \"react\";\nimport { Grid, CircularProgress, Typography, CardContent, Button } from \"@material-ui/core\";\nimport LoginIcon from '@material-ui/icons/Refresh';\nimport SETTINGS from \"./Settings\";\n\nexport const CenterComponent = (props: any) => {\n  return (\n    <Grid container direction=\"column\" justify=\"center\" {...props} alignItems=\"center\">\n      {props.children}\n    </Grid>\n  );\n};\n\nexport const BigPreloader: React.FC = (props) => {\n  return (\n    <CenterComponent {...props}>\n      <CircularProgress style={{width: '70px', height: '70px'}} thickness={2} />\n    </CenterComponent>\n  );\n};\n\nexport function internalError(message: string, additionnal_text = \"\", login_again = false) {\n  return (\n    <div>\n      <CardContent>\n        <Typography variant=\"h3\" gutterBottom>\n          Error\n        </Typography>\n\n        <hr/>\n\n        <Typography variant=\"h5\" component=\"h2\" style={{marginBottom: '2.5rem'}}>\n          {message}\n        </Typography>\n        <p>\n          {additionnal_text}\n        </p>\n\n        {login_again ? (\n          <Button onClick={() => SETTINGS.logout()} color=\"primary\" style={{width: '100%', marginTop: '1.5rem'}}>\n            <LoginIcon style={{marginRight: '3%'}} /> Login again\n          </Button>\n        ) : \"\" }\n      </CardContent>\n    </div>\n  );\n}\n\nexport function specialJoinJSX(array: string[], options: { \n  sep?: string, \n  final_joiner?: string, \n  class_element?: string, \n  class_joiner?: string \n} = {}) : JSX.Element {\n  options = Object.assign({ sep: \", \", final_joiner: \" and \", class_joiner: \"no-bold\" }, options);\n\n  if (array.length < 2) {\n    return <span>{array[0]}</span>;\n  }\n\n  const e: JSX.Element[] = [];\n\n  let i = 0;\n  let last = array.length - 1;\n\n  for (const element of array) {\n    e.push(<span className={options.class_element} key={String(Math.random())}>{element}</span>);\n\n    if ((i + 1) === last) {\n      e.push(<span key={String(Math.random())} className={options.class_joiner}>{options.final_joiner}</span>);\n    }\n    else if (i < last) {\n      e.push(<span key={String(Math.random())} className={options.class_joiner}>{options.sep}</span>);\n    }\n\n    i++;\n  }\n\n  return <span>{e}</span>;\n}\n","import classes from './EmptyMessage.module.scss';\nimport React from 'react';\nimport { CenterComponent } from '../../../tools/PlacingComponents';\nimport { Typography } from '@material-ui/core';\n\ntype EmptyMessageProps = {\n  icon: any;\n  main: string;\n  second: JSX.Element | string;\n};\n\nexport default function EmptyMessage(props: EmptyMessageProps) {\n  const Icon = props.icon;\n  \n  return (\n    <div className=\"center-absolute\">\n      <CenterComponent className={classes.text_lighten} style={{minWidth: '70vw'}}>\n        <Icon className={classes.icon} />\n        <Typography variant=\"h3\" style={{marginTop: \"1rem\", marginBottom: \".7rem\", textAlign: 'center'}}>\n          {props.main}\n        </Typography>\n        <Typography variant=\"h6\" style={{textAlign: 'center'}}>\n          {props.second}\n        </Typography>\n      </CenterComponent>\n    </div>\n  )\n}\n","import React from 'react';\nimport BlockIcon from '@material-ui/icons/Block';\nimport classes from './NoArchive.module.scss';\nimport { Typography } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\nimport EmptyMessage from '../EmptyMessage/EmptyMessage';\n\nexport default function NoArchive() {\n  return (\n    <EmptyMessage \n      icon={BlockIcon} \n      main={\"Archive is not loaded\"} \n      second={<div>\n        Please load an valid archive in <Link to=\"/\" className={classes.archive_link}>\n          <Typography variant=\"inherit\" color=\"primary\">\n            Archive page\n          </Typography>\n        </Link>.\n      </div>}\n    />\n  );\n}\n","import React from 'react';\nimport classes from './TweetMedia.module.scss';\nimport { PartialTweetEntity, MediaGDPREntity } from 'twitter-archive-reader';\nimport { Dialog } from '@material-ui/core';\n\ntype TweetMediaProp = {\n  entities: PartialTweetEntity | { media?: MediaGDPREntity[] }\n};\n\ntype TweetMediaState = {\n  image_full: number | null\n}\n\nexport default class TweetMedia extends React.Component<TweetMediaProp, TweetMediaState> {\n  state: TweetMediaState = {\n    image_full: null\n  };\n\n  renderImages() {\n    return (this.media as MediaGDPREntity[]).map((m, i) => {\n      return <img key={`img${i}`}\n        alt=\"Tweet attachment\" \n        src={m.media_url_https} \n        className={classes['img' + (i + 1)]} \n        onClick={() => this.setState({ image_full: i })}\n      />;\n    });\n  }\n\n  renderVideo(type: \"gif\" | \"mp4\", full = false) {\n    const m = this.media[0] as MediaGDPREntity;\n    // Remove the possible query string\n    m.video_info.variants.forEach(e => e.url.split('?', 2)[0]);\n\n    const valids = m.video_info.variants.filter(e => e.bitrate && e.url.endsWith('.mp4'));\n\n    const bitrates = valids.map(e => Number(e.bitrate));\n    const better = bitrates.indexOf(Math.max(...bitrates));\n\n    let better_variants = valids[better];\n\n    // If any variant is valid\n    if (!better_variants) {\n      console.warn(\"No good variant\", m.video_info.variants, valids);\n      better_variants = m.video_info.variants[0];\n    }\n\n    if (type === \"gif\") {\n      return <video \n        about=\"GIF\" \n        className={classes.video + (full ? \" \" + classes.full : \"\")} \n        loop \n        autoPlay \n        src={better_variants.url} \n        onClick={full ? undefined : () => this.setState({ image_full: 0 })}\n      />;\n    }\n    else {\n      return <video \n        about=\"Video\" \n        className={classes.video + (full ? \" \" + classes.full : \"\")} \n        controls \n        src={better_variants.url} \n        // onClick={full ? undefined : () => this.setState({ image_full: 0 })}\n      />;\n    }\n  }\n\n  rightClass() {\n    switch (this.media.length) {\n      case 2:\n        return \"two\";\n      case 3:\n        return \"three\";\n      case 4:\n        return \"four\";\n    }\n\n    return \"one\";\n  }\n\n  renderModal(image: number) {\n    const used_entity = this.media;\n    let obj: any;\n\n    if (\n      used_entity.length === 1 && \n      (used_entity[0] as MediaGDPREntity).type && \n      (used_entity[0] as MediaGDPREntity).type !== \"photo\"\n    ) {\n      const media = used_entity[0] as MediaGDPREntity;\n      obj = this.renderVideo(media.type === \"animated_gif\" ? \"gif\" : \"mp4\", true);\n    }\n    else {\n      const image_url = used_entity[image].media_url_https;\n      obj = <img alt=\"Full\" src={image_url} className={classes.full_img} />;\n    }\n\n    return (\n      <Dialog classes={\n        {paper: classes.paper}\n      } onClose={() => this.setState({ image_full: null })} open={true}>\n        {obj}\n      </Dialog>\n    );\n  }\n\n  get media() {\n    return this.props.entities.media;\n  }\n\n  render() {\n    const used_entity = this.media;\n\n    let data: JSX.Element | JSX.Element[];\n    if (\n      used_entity.length === 1 && \n      (used_entity[0] as MediaGDPREntity).type && \n      (used_entity[0] as MediaGDPREntity).type !== \"photo\"\n    ) {\n      const media = used_entity[0] as MediaGDPREntity;\n      data = this.renderVideo(media.type === \"animated_gif\" ? \"gif\" : \"mp4\");\n    }\n    else {\n      data = this.renderImages();\n    }\n\n    const to_inject = this.rightClass();\n\n    return (\n      <div>\n        {this.state.image_full !== null && this.renderModal(this.state.image_full)}\n        <div className={classes.root + \" \" + (to_inject ? classes[to_inject] : \"\")}>\n          {data}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Status } from 'twitter-d';\nimport { PartialTweet } from 'twitter-archive-reader';\n// import classes from './TweetText.module.scss';\nimport { unescapeTwi } from '../../../helpers';\nimport Graphene from 'grapheme-splitter';\n\nconst splitter = new Graphene;\nconst TWITTER_BASE = \"https://twitter.com/\";\nconst TWITTER_HASH_BASE = \"https://twitter.com/search?q=\";\n\ntype TweetTextProp = {\n  data: PartialTweet | Status,\n};\n\nexport default class TweetText extends React.Component<TweetTextProp> {\n  calculateFragments() {\n    const frags: [number, number, JSX.Element][] = [];\n\n    const t = this.tweet.retweeted_status ? this.tweet.retweeted_status : this.tweet;\n\n    if (t.entities) {\n      if (t.entities.user_mentions && t.entities.user_mentions.length) {\n        for (const m of t.entities.user_mentions) {\n          frags.push([Number(m.indices[0]), Number(m.indices[1]), \n            <a \n              target=\"_blank\" \n              rel=\"noopener noreferrer\" \n              title={'@' + m.screen_name} \n              href={TWITTER_BASE + m.screen_name}\n              key={String(frags.length)}\n            >@{m.screen_name}</a>\n          ]);\n        }\n      }\n\n      if (t.entities.urls && t.entities.urls.length) {\n        for (const u of t.entities.urls) {\n          frags.push([Number(u.indices[0]), Number(u.indices[1]), \n            <a \n              target=\"_blank\" \n              rel=\"noopener noreferrer\" \n              title={'Link to ' + u.display_url} \n              href={u.expanded_url}\n              key={String(frags.length)}\n            >{u.display_url}</a>\n          ]);\n        }\n      }\n\n      if (t.entities.hashtags && t.entities.hashtags.length) {\n        for (const h of t.entities.hashtags) {\n          frags.push([Number(h.indices[0]), Number(h.indices[1]), \n            <a \n              target=\"_blank\" \n              rel=\"noopener noreferrer\" \n              title={'#' + h.text} \n              href={TWITTER_HASH_BASE + encodeURIComponent('#' + h.text)}\n              key={String(frags.length)}\n            >#{h.text}</a>\n          ]);\n        }\n      }\n\n      if (t.entities.media && t.entities.media.length) {\n        // First link is always the good one\n        const m = t.entities.media[0];\n        frags.push([Number(m.indices[0]), Number(m.indices[1]), \n          <a \n            target=\"_blank\" \n            rel=\"noopener noreferrer\" \n            title={'Link to picture ' + m.display_url} \n            href={m.expanded_url}\n            key={String(frags.length)}\n          >{m.display_url}</a>\n        ]);\n      }\n    }\n\n    // Tri par ordre d'apparition croissant\n    return frags.sort((a, b) => a[0] - b[0]);\n  }\n\n  renderText(frags: [number, number, JSX.Element][]) {\n    const parts: JSX.Element[] = [];\n    const original_t = this.tweet.retweeted_status ? this.tweet.retweeted_status : this.tweet;\n\n    // @ts-ignore Ralentit énormément le code. A utiliser avec parcimonie\n    const original_string = splitter.splitGraphemes(original_t.full_text ? original_t.full_text : original_t.text);\n\n    let last_end = 0;\n    let i = 1;\n\n    // Assemble les fragments et les lie avec les parties \n    // de la chaîne originale entre eux\n    for (const [begin, end, element] of frags) {\n      if (begin !== last_end) {\n        parts.push(<span key={String(frags.length + i)}>{\n          unescapeTwi(original_string.slice(last_end, begin).join(\"\"))\n        }</span>);\n      }\n      parts.push(element);\n      last_end = end;\n      i++;\n    }\n\n    // Rend le reste de la chaîne originale si besoin\n    if (original_string.length !== last_end) {\n      parts.push(<span key={String(frags.length + i)}>{\n        unescapeTwi(original_string.slice(last_end).join(\"\"))\n      }</span>);\n    }\n\n    return parts;\n  }\n\n  get tweet() {\n    return this.props.data;\n  }\n\n  render() {\n    return this.renderText(this.calculateFragments());\n  }\n}\n","import React from 'react';\nimport classes from './Tweet.module.scss';\nimport { Status, FullUser } from 'twitter-d';\nimport { PartialTweet, PartialTweetUser } from 'twitter-archive-reader';\nimport { Card, CardHeader, Avatar, CardContent, CardActions, Typography, Checkbox } from '@material-ui/core';\nimport RetweetIcon from '@material-ui/icons/Repeat';\nimport { dateFormatter } from '../../../helpers';\nimport TweetImage from './TweetMedia';\nimport TweetText from './TweetText';\nimport { withStyles } from '@material-ui/styles';\nimport { CheckboxProps } from '@material-ui/core/Checkbox';\nimport SETTINGS from '../../../tools/Settings';\nimport UserCache from '../../../classes/UserCache';\n\ntype TweetProp = {\n  data: PartialTweet | Status,\n  checked?: boolean,\n  onCheckChange?: (is_checked: boolean, id_str: string) => void;\n};\n\ntype TweetState = {\n  checked: boolean;\n};\n\nconst TweetCheckbox = withStyles({\n  root: {\n    '&$checked': {\n      color: '#ff8c34',\n    },\n  },\n  checked: {},\n})((props: CheckboxProps) => <Checkbox color=\"default\" {...props} />);\n\nexport default class Tweet extends React.Component<TweetProp, TweetState> {\n  state: TweetState;\n\n  constructor(props: TweetProp) {\n    super(props);\n\n    this.state = { checked: this.props.checked };\n  }\n\n  renderMedia() {\n    if (this.props.data.extended_entities) {\n      if (this.props.data.extended_entities.media && this.props.data.extended_entities.media.length) {\n        // @ts-ignore\n        return <TweetImage entities={this.props.data.extended_entities} />;\n      }\n    }\n\n    if (this.props.data.entities && this.props.data.entities.media && this.props.data.entities.media.length) {\n      // @ts-ignore\n      return <TweetImage entities={this.props.data.entities} />; \n    }\n\n    return \"\";\n  }\n\n  get original() {\n    return (this.props.data.retweeted_status ? this.props.data.retweeted_status : this.props.data) as Status;\n  }\n\n  check() {\n    this.setState({ checked: true });\n  }\n\n  uncheck() {\n    this.setState({ checked: false });\n  }\n\n  render() {\n    let user_pp = (this.original.user as PartialTweetUser).profile_image_url_https;\n\n    // Si c'est un tweet d'une personne qui est en cache\n    if (UserCache.getFromCache(this.original.user.id_str)) {\n      user_pp = UserCache.getFromCache(this.original.user.id_str).profile_image_url_https;\n    }\n\n    const avatar = user_pp.replace('_normal', '');\n    const avatar_name = (this.original.user as PartialTweetUser).name.slice(0, 1);\n\n    return (\n      <Card className={classes.card}>\n        <CardHeader\n          classes={\n            { title: classes.card_title }\n          }\n\n          avatar={\n            <Avatar className={classes.avatar} src={SETTINGS.pp ? avatar : undefined}>\n              {SETTINGS.pp ? \"\" : avatar_name}\n            </Avatar>\n          }\n          action={(this.props.data as Status).retweeted_status ? \n            <RetweetIcon className={classes.retweeted} style={{padding: '12px'}} /> : \n            undefined\n          }\n          title={<a \n            className={classes.link}\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n            href={\"https://twitter.com/\" + (this.original.user as PartialTweetUser).screen_name}\n          >\n            {`${(this.original.user as PartialTweetUser).name}`}\n          </a>}\n          subheader={<a \n            className={classes.link}\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n            href={\"https://twitter.com/\" + (this.original.user as PartialTweetUser).screen_name}\n          >\n            {`@${(this.original.user as PartialTweetUser).screen_name}`}\n          </a>}\n        />\n\n        {this.renderMedia()}\n        \n        <CardContent>\n          <Typography variant=\"body2\" className=\"pre-line\" color=\"textSecondary\" component=\"p\">\n            <TweetText data={this.props.data} />\n          </Typography>\n        </CardContent>\n\n        <CardActions disableSpacing className={classes.card_action}>\n          <TweetCheckbox \n            onChange={(_, checked) => { \n              this.setState({ checked });\n              const oc = this.props.onCheckChange;\n\n              if (oc)\n                oc(checked, this.props.data.id_str); \n            }} \n            checked={this.state.checked}\n            disabled={!SETTINGS.can_delete}\n          />\n          <TweetDate \n            date={new Date(this.original.created_at)} \n            id_str={this.original.id_str} \n            screen_name={(this.original.user as FullUser).screen_name} \n          />\n        </CardActions>\n      </Card>\n    )\n  }\n}\n\nfunction TweetDate(props: { date: Date, screen_name: string, id_str: string }) {\n  return (\n    <div className={classes.date}>\n      <a \n        href={`https://twitter.com/${props.screen_name}/status/${props.id_str}`} \n        target=\"_blank\" \n        rel=\"noopener noreferrer\"\n        className={classes.link}\n      >{dateFormatter(\"Y-m-d H:i:s\", props.date)}</a>\n    </div>\n  );\n}\n\n","import { Status } from 'twitter-d';\nimport Cache from './Cache';\n\nexport const TweetCache = new Cache<Status>('batch/tweets');\nexport default TweetCache;\n","import io from 'socket.io-client';\nimport { SERVER_URL } from '../const';\nimport SETTINGS from './Settings';\nimport EventTarget, { defineEventAttribute } from 'event-target-shim';\nimport APIHELPER from './ApiHelper';\nimport { toast } from '../components/shared/Toaster/Toaster';\n\nexport interface TaskInformation extends TaskBaseMessage {\n  percentage: number;\n  done: number;\n  remaining: number;\n  failed: number;\n  total: number;\n  error?: string;\n}\n\nexport interface TaskBaseMessage {\n  id: string;\n}\n\ninterface TaskRequestError extends TaskBaseMessage {\n  msg: string;\n}\n\n/*\ntype TaskMessageTypes = \"task end\" | \"task cancel\" | \"progression\" | \"error\";\n*/\n\nclass TaskManager extends EventTarget {\n  subscriptions: {\n    [id: string]: TaskInformation\n  } = {};\n\n  protected socket: SocketIOClient.Socket;\n  protected __ready: Promise<void>;\n\n  socket_io_fail: boolean = false;\n\n  constructor() {\n    super();\n    this.socket = io(SERVER_URL, { reconnectionAttempts: 10, autoConnect: false });\n    this.resetSocketIo();\n  }\n\n  async start(tweets_ids: string[]) {\n    if (tweets_ids.length === 0)\n      return;\n\n    const { status, task } = await APIHELPER.request('tasks/create.json', {\n      method: 'POST',\n      body_mode: 'json',\n      parameters: { tweets: tweets_ids.join(',') }\n    });\n\n    if (status && task) {\n      toast(\"Task has been started.\", \"success\");\n\n      this.subscriptions[task] = {\n        done: 0,\n        total: tweets_ids.length,\n        remaining: tweets_ids.length,\n        percentage: 0,\n        id: task,\n        failed: 0\n      };\n\n      this.subscribe(task);\n    }\n    else {\n      throw \"Unknown error\";\n    }\n  }\n\n  subscribe(id: string) {\n    console.log(\"Subscribing\", id);\n    this.socket.emit('task', id, SETTINGS.token);\n    this.makeEvent('subscribe', { id });\n  }\n\n  unsubscribe(id: string) {\n    console.log(\"Unsub\", id);\n    if (this.has(id))\n      this.socket.emit('remove', id, SETTINGS.token);\n\n    this.remove(id);\n    this.makeEvent('unsubscribe', { id });\n  }\n\n  remove(id: string) {\n    delete this.subscriptions[id];\n    this.makeEvent('remove', { id });\n  }\n\n  has(id: string) {\n    return id in this.subscriptions;\n  }\n\n  info(id: string) {\n    return this.subscriptions[id];\n  }\n\n  async cancel(id: string) {\n    if (this.has(id)) {\n      this.remove(id);\n    }\n\n    await APIHELPER.request(`tasks/destroy/${id}.json`, { method: 'POST' });\n\n    toast(\"Task has been cancelled.\", \"info\");\n  }\n\n  async stopAll() { \n    const ids = Object.keys(this.subscriptions);\n\n    for (const id of ids) {\n      this.remove(id);\n    }\n\n    await APIHELPER.request('tasks/destroy/all.json', { method: 'POST' });\n\n    toast(\"All tasks has been stopped.\", \"info\");\n  }\n\n  /** All tasks running (even non subcribed). Fires APIErrors when failing to get tasks. */\n  get all() : Promise<TaskInformation[]> {\n    return APIHELPER.request('tasks/details/all');\n  }\n\n  protected refresh(id: string, data: TaskInformation) {\n    // launch events...\n    this.subscriptions[id] = data;\n    this.makeEvent('progression', data);\n\n    if (data.percentage >= 100) {\n      toast(`Task #${id} has ended.`, \"success\");\n    }\n  }\n\n  get subscribed() {\n    return Object.values(this.subscriptions);\n  }\n\n  get ready() {\n    return this.__ready;\n  }\n\n  protected resetSocketIo(auto_reconnect = true) {\n    this.socket.disconnect();\n    this.socket.removeAllListeners();\n    this.socket_io_fail = false;\n\n    if (auto_reconnect) {\n      return this.initSocketIo();\n    }\n    else {\n      return undefined;\n    }\n  }\n\n  protected initSocketIo() {\n    return this.__ready = new Promise((resolve, reject) => {\n      this.socket.connect();\n      this.socket.on('connect', resolve);\n      this.socket.on('connect_error', () => { \n        reject(); \n        this.socket_io_fail = true; \n      });\n    }).then(() => {\n      // Apply all the listeners needed\n      this.socket.on('progression', (task: TaskInformation) => {\n        console.log(\"Message received\", task);\n\n        this.refresh(task.id, task);\n        if (task.error) {\n          // Task is over, stopping\n          console.error(\"Error task\", task.error);\n        }\n      });\n\n      this.socket.on('task error', (task: TaskRequestError) => {\n        console.log(\"Error task\", task);\n\n        // Request a task, but it didn't exists / user not authorized\n        this.remove(task.id);\n      });\n\n      this.socket.on('error', (e: any) => {\n        console.log(\"Error unknown\", e);\n      });\n\n      this.socket.on('task end', (task: TaskBaseMessage) => {\n        console.log(\"Task end\", task);\n\n        if (this.has(task.id)) {\n          this.info(task.id).percentage = 100;\n        }\n      });\n\n      this.socket.on('task cancel', (task: TaskBaseMessage) => {\n        console.log(\"Task cancelled\", task);\n\n        this.remove(task.id);\n      });\n    });\n  }\n\n  protected makeEvent(name: string, data: any) {\n    this.dispatchEvent(new CustomEvent(name, { detail: data }));\n  }\n};\n\ndefineEventAttribute(TaskManager.prototype, 'subscribe');\ndefineEventAttribute(TaskManager.prototype, 'unsubscribe');\ndefineEventAttribute(TaskManager.prototype, 'remove');\ndefineEventAttribute(TaskManager.prototype, 'progression');\n\nconst Tasks = new TaskManager;\nexport default Tasks;\n\nwindow.DEBUG.tasks = Tasks;\n","import React from 'react';\nimport { PartialTweet } from 'twitter-archive-reader';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport SETTINGS from '../../../tools/Settings';\nimport Tweet from '../Tweets/Tweet';\nimport classes from './TweetViewer.module.scss';\nimport { filterTweets } from '../../../helpers';\nimport NoTweetsIcon from '@material-ui/icons/FormatClear';\nimport { CenterComponent } from '../../../tools/PlacingComponents';\nimport { Typography, Button, CircularProgress, Icon, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\nimport TweetCache from '../../../classes/TweetCache';\nimport Tasks from '../../../tools/Tasks';\nimport { toast } from '../Toaster/Toaster';\n \ntype ViewerProps = {\n  tweets: PartialTweet[];\n  chunk_len?: number;\n};\n\ntype ViewerState = {\n  chunk_len: number;\n  has_more: boolean;\n  tweets: PartialTweet[];\n  current_page: PartialTweet[];\n  scroller_key: string;\n  delete_modal: boolean;\n  readonly selectible: Set<string>;\n  selected: Set<string>;\n  modal_confirm: boolean;\n};\n\nconst DEFAULT_CHUNK_LEN = 26;\n\nexport default class TweetViewer extends React.Component<ViewerProps, ViewerState> {\n  state: ViewerState;\n  references: {\n    [id: string]: React.RefObject<any>\n  } = {};\n  cache: {\n    [id: string]: any;\n  } = {};\n\n  constructor(props: ViewerProps) {\n    super(props);\n    const tweets = filterTweets(this.props.tweets);\n\n    this.state = {\n      chunk_len: this.props.chunk_len ? this.props.chunk_len : DEFAULT_CHUNK_LEN,\n      has_more: true,\n      tweets,\n      current_page: [],\n      scroller_key: String(Math.random()),\n      delete_modal: false,\n      selectible: new Set(tweets.map(t => t.id_str)),\n      selected: new Set,\n      modal_confirm: false\n    };\n\n    // Needed because REACT is shit\n    this.onTweetCheckChange = this.onTweetCheckChange.bind(this);\n    this.renderTweet = this.renderTweet.bind(this);\n  }\n\n  openConfirmModal() {\n    this.setState({ modal_confirm: true });\n  }\n\n  closeConfirmModal() {\n    this.setState({ modal_confirm: false });\n  }\n\n  warningMessageFilter() {\n    const filters = [SETTINGS.only_medias, SETTINGS.only_videos, SETTINGS.only_rts];\n\n    if (filters.some(e => e)) {\n      const [medias, videos, rts] = filters;\n\n      if (videos) {\n        return (rts ? \"re\" : \"\") + \"tweets with videos/GIFs\";\n      }\n      if (medias) {\n        return (rts ? \"re\" : \"\") + \"tweets with medias\";\n      }\n\n      /* \n      const texts: string[] = [];\n      if (medias) {\n        texts.push(\"tweets with medias\");\n      }\n      if (videos) {\n        texts.push(\"tweets with videos/GIFs\");\n      }\n      if (rts) {\n        texts.push(\"retweets\");\n      }\n\n      if (texts.length > 1) {\n        return texts.slice(0, texts.length - 1).join(', ') + \" and \" + texts[texts.length - 1];\n      }\n      else {\n        return texts[0];\n      } \n      */\n    }\n    return \"\";\n  }\n\n  loadTweets(page: number) {\n    page -= 1;\n\n    const start = this.state.chunk_len * page;\n\n    const tweets = this.state.tweets.slice(start, start + this.state.chunk_len);\n\n    if (!tweets.length) {\n      const current_page = this.state.current_page;\n      this.setState({\n        current_page,\n        has_more: false\n      });\n    }\n\n    if (SETTINGS.tweet_dl && !SETTINGS.expired) {\n      // do dl\n      TweetCache.bulk(tweets.map(t => t.id_str))\n        .then(data => {\n          const t = Object.values(data);\n          console.log(t, \"excepted\", tweets.length);\n    \n          // @ts-ignore\n          this.state.current_page.push(...t);\n        })\n        .catch(e => {\n          // show error\n          console.error(e);\n          // Classic load instead\n          this.state.current_page.push(...tweets);\n        })\n        .finally(() => {\n          const current_page = this.state.current_page;\n          this.setState({\n            current_page,\n            has_more: tweets.length > 0\n          });\n        })\n    }\n    else {\n      this.state.current_page.push(...tweets);\n\n      const current_page = this.state.current_page;\n      this.setState({\n        current_page,\n        has_more: tweets.length > 0\n      });\n    }\n  }\n\n  componentDidUpdate(prev_props: ViewerProps) {\n    if (prev_props.tweets !== this.props.tweets) {\n      // Tweets change, component reset\n      this.references = {};\n      this.cache = {};\n      const tweets = filterTweets(this.props.tweets);\n      this.setState({\n        current_page: [],\n        tweets,\n        has_more: true,\n        delete_modal: false,\n        scroller_key: String(Math.random()),\n        selected: new Set,\n        selectible: new Set(tweets.map(i => i.id_str))\n      });\n    }\n  }\n\n  checkAll() {\n    this.setState({\n      selected: new Set(this.state.selectible),\n      delete_modal: true\n    });\n    Object.values(this.references).map(t => {\n      t.current.check();\n    });\n  }\n\n  uncheckAll() {\n    this.setState({\n      selected: new Set([]),\n      delete_modal: false\n    });\n    Object.values(this.references).map(t => {\n      t.current.uncheck();\n    });\n  }\n\n  renderTweet(t: PartialTweet, i: number) {\n    this.references[t.id_str] = t.id_str in this.references ? this.references[t.id_str] : React.createRef();\n    \n    if (t.id_str in this.cache) {\n      return this.cache[t.id_str];\n    }\n\n    return this.cache[t.id_str] = <Tweet \n      data={t} \n      key={i} \n      ref={this.references[t.id_str]} \n      checked={this.state.selected.has(t.id_str)} \n      onCheckChange={this.onTweetCheckChange} \n    />;\n  }\n\n  onTweetCheckChange(checked: boolean, id_str: string) {\n    console.log(this, checked, id_str);\n    \n    const s = this.state.selected;\n    if (checked) {\n      s.add(id_str);\n    }\n    else {\n      s.delete(id_str);\n    }\n\n    this.setState({ delete_modal: !!s.size, selected: s });\n  }\n\n  loader() {\n    return (\n      <div className={classes.loader} key={0}>\n        <CenterComponent>\n          <CircularProgress thickness={3} className={classes.loader_real} />\n        </CenterComponent>\n      </div>\n    );\n  }\n\n  noTweetsProp() {\n    return (\n      <CenterComponent className={classes.no_tweets}>\n        <NoTweetsIcon className={classes.icon} />\n        <Typography variant=\"h5\" style={{marginTop: \"1rem\", marginBottom: \".7rem\"}}>\n          This element does not contain any tweets. :(\n        </Typography>\n      </CenterComponent>\n    );\n  }\n\n  noTweetsState() {\n    return (\n      <CenterComponent className={classes.no_tweets}>\n        <NoTweetsIcon className={classes.icon} />\n        <Typography variant=\"h5\" style={{marginTop: \"1rem\", marginBottom: \".7rem\"}}>\n          This element does not contain any tweets. :(\n        </Typography>\n        <Typography variant=\"h6\">\n          It seems you have applied filters \n          that hide all the tweets that can be displayed.\n        </Typography>\n\n        <Button component={Link} to=\"/settings/\" color=\"primary\" style={{marginTop: '1.5rem'}}>\n          Manage filters\n        </Button>\n      </CenterComponent>\n    );\n  }\n\n  noTweetsLeft() {\n    return (\n      <CenterComponent className={classes.no_tweets}>\n        <NoTweetsIcon className={classes.icon} />\n        <Typography variant=\"h5\" style={{marginTop: \"1rem\", marginBottom: \".7rem\"}}>\n          No tweets to display here\n        </Typography>\n\n        <Typography>\n          All tweets are deleted, or you don't have the permission to read them.\n        </Typography>\n\n        <Typography>\n          Try disabling the \"Download tweets\" function into settings.\n        </Typography>\n\n        <Typography>\n          You could also try to log in with another Twitter account.\n        </Typography>\n\n        <Button component={Link} to=\"/settings/\" color=\"primary\" style={{marginTop: '1.5rem'}}>\n          Settings\n        </Button>\n      </CenterComponent>\n    );\n  }\n\n  confirmDeletionModal() {\n    return (\n      <Dialog\n        open={true}\n        onClose={() => this.closeConfirmModal()}\n        aria-labelledby=\"responsive-dialog-title\"\n      >\n        <DialogTitle>Delete selected tweets ?</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            The tweets will be deleted from <span className=\"bold\">Twitter</span>.\n          </DialogContentText>\n          <DialogContentText>\n            A deletion task will be started. \n            You can't restore tweets after they're been removed from Twitter.\n            Are you sure you want to do this ?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => this.closeConfirmModal()} color=\"primary\" autoFocus>\n            No\n          </Button>\n          <Button onClick={() => { \n            this.closeConfirmModal();  \n            Tasks.start([...this.state.selected])\n              .catch(() => {\n                toast(\"Unable to start task. Check your network.\", \"error\");\n              });\n            this.uncheckAll();\n          }} color=\"secondary\">\n            Yes\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  askDeletionModal() {\n    return (\n      <div className={classes.modal_root + \n          (this.state.delete_modal ? \" \" + classes.open : \"\") + \" \"\n        }>\n        <div className={classes.modal_grid_root}>\n          <div className={classes.modal_selected}>\n            {this.state.selected.size} selected\n          </div> \n\n          <div className={classes.modal_select_all}>\n            <Button color=\"primary\" onClick={() => this.checkAll()}>\n              Select all\n            </Button>\n          </div> \n\n          <div className={classes.modal_unselect_all}>\n            <Button className={classes.modal_unselect_all_color} onClick={() => this.uncheckAll()}>\n              Unselect all\n            </Button>\n          </div> \n          \n          <div className={classes.modal_delete_all}>\n            <Button color=\"secondary\" onClick={() => this.openConfirmModal()}>\n              <Icon>delete_sweep</Icon>\n            </Button>\n          </div> \n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    // Pas de tweets donnés\n    if (this.props.tweets.length === 0) {\n      return this.noTweetsProp();\n    }\n\n    // Pas de tweets après filtrage\n    if (this.state.tweets.length === 0) {\n      return this.noTweetsState();\n    }\n\n    const warning = this.warningMessageFilter();\n\n    const t = this.state.current_page.map(this.renderTweet);\n\n    // no tweets available (all deleted)\n    if (t.length === 0 && !this.state.has_more) {\n      return this.noTweetsLeft();\n    }\n\n    return (\n      <div>\n          {this.state.modal_confirm && this.confirmDeletionModal()}\n\n          {this.askDeletionModal()}\n\n          {warning && <div className={classes.warning_filters}>Showing only {warning}</div>}\n          \n          <InfiniteScroll\n              className={classes.card_container}\n              pageStart={0}\n              loadMore={p => this.loadTweets(p)}\n              hasMore={this.state.has_more}\n              loader={this.loader()}\n              key={this.state.scroller_key}\n          >\n              {t}\n          </InfiniteScroll>\n          {/* <Sentinel triggerMore={true} onVisible={() => console.log(\"Visible bottom !!\")} /> */}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, useTheme, Theme, createStyles } from '@material-ui/core/styles';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n    },\n    drawer: {\n      [theme.breakpoints.up('sm')]: {\n        width: drawerWidth,\n        flexShrink: 0,\n      },\n    },\n    appBar: {\n      marginLeft: drawerWidth,\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        display: 'none',\n      },\n    },\n    toolbar: theme.mixins.toolbar,\n    drawerPaper: {\n      width: drawerWidth,\n      \n    },\n    drawerPaperFull: {\n      position: 'fixed',\n      zIndex: 4,\n      [theme.breakpoints.up('sm')]: {\n        marginTop: '64px',\n        height: 'calc(100vh - 64px - 56px)',\n        width: drawerWidth,\n      },\n    },\n    content: {\n      flexGrow: 1,\n      padding: theme.spacing(3),\n      marginTop: 56,\n      marginBottom: 56,\n      [theme.breakpoints.up('sm')]: {\n        marginTop: 64,\n      },\n    },\n    no_pad: {\n      padding: 0\n    },\n    full_h: {\n      height: '100%'\n    }\n  }),\n);\n\ninterface ResponsiveDrawerProps {\n  /**\n   * Injected by the documentation to work in an iframe.\n   * You won't need it on your project.\n   */\n  drawer?: JSX.Element;\n  content?: JSX.Element;\n  title: string;\n  mobileOpen?: boolean;\n  noPadding?: boolean;\n  handleDrawerToggle: () => void;\n}\n\nexport default function ResponsiveDrawer(props: ResponsiveDrawerProps) {\n  const { drawer, title, content, handleDrawerToggle, mobileOpen, noPadding } = props;\n  // @ts-ignore\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      {/* <CssBaseline /> */}\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            edge=\"start\"\n            onClick={handleDrawerToggle}\n            className={classes.menuButton}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap>\n            {title}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <nav className={classes.drawer}>\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n            variant=\"temporary\"\n            anchor=\"left\"\n            open={mobileOpen}\n            onClose={handleDrawerToggle}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true, // Better open performance on mobile.\n            }}\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>  \n        { /* \n        // @ts-ignore */ }\n        <Hidden xsDown implementation=\"css\" className={classes.full_h}>\n          <Drawer className={classes.full_h}\n            classes={{\n              paper: classes.drawerPaperFull,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n      </nav>\n      <main className={classes.content + (noPadding ? \" \" + classes.no_pad : \"\")}>{content}</main>\n    </div>\n  );\n}","import React from 'react';\nimport classes from './Explore.module.scss';\nimport { setPageTitle, isArchiveLoaded, getMonthText, uppercaseFirst } from '../../../helpers';\nimport SETTINGS from '../../../tools/Settings';\nimport NoArchive from '../../shared/NoArchive/NoArchive';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { AppBar, Toolbar, Typography, Drawer, Divider, List, ListItem, ListItemText, ExpansionPanelSummary, ExpansionPanel as MuiExpansionPanel, ExpansionPanelDetails, withStyles } from '@material-ui/core';\nimport TweetViewer from '../../shared/TweetViewer/TweetViewer';\nimport { PartialTweet } from 'twitter-archive-reader';\nimport { CenterComponent } from '../../../tools/PlacingComponents';\nimport LeftArrowIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport ResponsiveDrawer from '../../shared/RespDrawer/RespDrawer';\n\nconst ExpansionPanel = withStyles({\n  root: {\n    border: '1px solid rgba(0, 0, 0, .125)',\n    borderBottomLeftRadius: '0 !important',\n    borderBottomRightRadius: '0 !important',\n    boxShadow: 'none',\n    '&:not(:last-child)': {\n      borderBottom: 0,\n    },\n    '&:before': {\n      display: 'none',\n    },\n    '&$expanded': {\n      margin: '0 !important',\n    },\n  },\n  expanded: {},\n})(MuiExpansionPanel);\n\ntype ExploreState = {\n  loaded: PartialTweet[] | null;\n  month: string;\n  mobileOpen: boolean;\n}\n\nexport default class Explore extends React.Component<{}, ExploreState> {\n  state: ExploreState = {\n    loaded: null,\n    month: \"\",\n    mobileOpen: false\n  };\n\n  componentDidMount() {\n    setPageTitle(\"Explore\");\n  }\n\n  handleDrawerToggle = () => {\n    this.setState({\n      mobileOpen: !this.state.mobileOpen\n    });\n  }\n\n  listOfYears() {\n    const a = SETTINGS.archive.index.years;\n\n    const years_sorted = Object.keys(a).sort((a, b) => Number(b) - Number(a));\n\n    return years_sorted.map(y => this.year(y));\n  }\n\n  noMonthSelected() {\n    return (\n      <CenterComponent className={classes.no_tweets}>\n        <LeftArrowIcon className={classes.icon} />\n        <Typography variant=\"h5\" style={{marginTop: \"1rem\", marginBottom: \".7rem\"}}>\n          Select a month\n        </Typography>\n\n        <Typography variant=\"h6\">\n          Choose a month to see your tweets.\n        </Typography>\n      </CenterComponent>\n    );\n  }\n\n  year(year: string) {\n    let i = 0;\n    const months = SETTINGS.archive.index.years[year];\n    for (const m in months) {\n      i += Object.keys(months[m]).length;\n    }\n\n    return (\n      <ExpansionPanel key={\"year\" + year}>\n        <ExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n        >\n          <Typography><span className=\"bold\">{year}</span> <span className={classes.year_count}>({i})</span></Typography>\n        </ExpansionPanelSummary>\n        <ExpansionPanelDetails style={{padding: '0'}}>\n          {this.listOfMonths(year)}\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    )\n  }\n\n  monthClicker(year: string, month: string) {\n    this.setState({\n      loaded: SETTINGS.archive.month(month, year),\n      month: year + \"-\" + month,\n      mobileOpen: false\n    });\n  }\n\n  listOfMonths(year: string) {\n    const current_year = SETTINGS.archive.index.years[year];\n\n    return (\n      <List className={classes.list_month}>\n        {Object.entries(current_year).map(([month, tweets]) => (\n          <ListItem \n            button \n            key={year + \"-\" + month} \n            className={year + \"-\" + month === this.state.month ? classes.selected_month : \"\"} \n            onClick={() => this.monthClicker(year, month)}\n          >\n            <ListItemText className={classes.drawer_month}>\n              {getMonthText(month)} ({Object.keys(tweets).length})\n            </ListItemText>\n          </ListItem>\n        ))}\n      </List>\n    )\n  }\n\n  showActiveMonth() {\n    const [year, month] = this.state.month.split('-');\n    const month_text = uppercaseFirst(getMonthText(month));\n    const tweets_number = this.state.loaded.length;\n\n    return (\n      <div className={classes.month_header}>\n        {month_text} {year} <span className={classes.month_tweet_number}>\n            <span className=\"bold\">{tweets_number}</span> tweets\n          </span>\n      </div>\n    );\n  }\n\n  render() {\n    if (!isArchiveLoaded()) {\n      return <NoArchive />;\n    }\n\n    return (\n      <ResponsiveDrawer \n        handleDrawerToggle={this.handleDrawerToggle}\n        mobileOpen={this.state.mobileOpen}\n        title=\"Explore\"\n        drawer={<div>\n          <div className={classes.toolbar} />\n          <Divider />\n          {this.listOfYears()}\n        </div>}\n        content={this.state.loaded ? \n          (<div>\n            {this.showActiveMonth()}\n            <TweetViewer tweets={this.state.loaded} />\n          </div>) :\n          this.noMonthSelected()\n        }\n      />\n    );\n  }\n}\n","import classes from './Task.module.scss';\nimport React from 'react';\nimport { TaskInformation } from '../../../tools/Tasks';\nimport { ExpansionPanel, ExpansionPanelSummary, Typography, ExpansionPanelDetails, LinearProgress, ExpansionPanelActions, Button } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport RoundIcon from '@material-ui/icons/Lens';\n\ntype TaskP = {\n  data: TaskInformation;\n  is_subscribed?: boolean;\n  onSubChange?: Function;\n  onCancel?: Function;\n}\n\nexport default class Task extends React.Component<TaskP> {\n  get id() {\n    return this.props.data.id;\n  }\n\n  get is_over() {\n    return this.props.data.percentage >= 100;\n  }\n\n  render() {\n    const base_panel = this.is_over ? classes.panel_over : (this.props.is_subscribed ? classes.panel_sub : classes.panel_unsub);\n    const color_icon = this.is_over ? classes.icon_green : (this.props.is_subscribed ? classes.icon_orange : classes.icon_purple);\n\n    const completed = this.props.data.done + this.props.data.failed;\n    const total = this.props.data.total;\n\n    return (\n      <ExpansionPanel className={base_panel}>\n        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n          <Typography className={classes.heading}>\n            <RoundIcon className={classes.icon + \" \" + color_icon} /> \n            Task #<span className=\"bold\">{this.id}</span> \n            <span className={classes.header_info}> (\n              <span className=\"bold\">{completed}/{total}</span>, <span className=\"bold\">{this.props.data.percentage.toFixed(0)}</span>% completed)\n              </span>\n          </Typography>\n        </ExpansionPanelSummary>\n        <ExpansionPanelDetails className={classes.details}>\n          <Typography className={classes.counts}>\n            <span className=\"bold\">{this.props.data.done}</span> deleted,\n            <span className=\"bold\"> {this.props.data.failed}</span> failed,\n            <span className=\"bold\"> {this.props.data.remaining}</span> remaining.\n          </Typography>\n\n          <LinearProgress variant=\"determinate\" className={this.is_over ? classes.bar_over : classes.bar} value={this.props.data.percentage} />\n        </ExpansionPanelDetails>\n\n        <ExpansionPanelActions>\n          {!this.is_over && <Button size=\"small\" onClick={() => this.props.onCancel(this.id)}>\n            Cancel\n          </Button>}\n          \n          {!this.props.is_subscribed && <Button size=\"small\" color=\"primary\" onClick={() => this.props.onSubChange(true, this.id)}>\n            Subscribe\n          </Button>}\n\n          {this.props.is_subscribed && <Button size=\"small\" color=\"primary\" onClick={() => this.props.onSubChange(false, this.id)}>\n            Unsubscribe\n          </Button>}\n          \n        </ExpansionPanelActions>\n      </ExpansionPanel>\n    );\n  }\n}\n","import classes from './TaskModal.module.scss';\nimport React from 'react';\nimport Tasks, { TaskInformation, TaskBaseMessage } from '../../../tools/Tasks';\nimport { Dialog, AppBar, Toolbar, Typography, Slide, Button, Container } from '@material-ui/core';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport Task from './Task';\nimport { CenterComponent, BigPreloader } from '../../../tools/PlacingComponents';\nimport EmptyMessage from '../../shared/EmptyMessage/EmptyMessage';\nimport TimelineIcon from '@material-ui/icons/Timeline';\nimport CompletedIcon from '@material-ui/icons/Check';\nimport SubscribedIcon from '@material-ui/icons/Sync';\nimport UnSubbedIcon from '@material-ui/icons/CloudQueue';\n\nconst Transition = React.forwardRef<unknown, TransitionProps>(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\ntype TaskModalProps = {\n  open: boolean;\n  onClose: Function;\n};\n\ntype TaskModalState = {\n  key: string;\n  open: boolean;\n  subscribed: TaskInformation[];\n  unsub?: TaskInformation[];\n};\n\nexport default class TaskModal extends React.Component<TaskModalProps, TaskModalState> {\n  constructor(props: TaskModalProps) {\n    super(props);\n\n    this.state = { \n      key: String(Math.random()), \n      open: props.open,\n      subscribed: [],\n      unsub: null\n    };\n  }\n\n  componentDidMount() {\n    // @ts-ignore\n    Tasks.addEventListener('progression', this.handleProgress);\n    // @ts-ignore\n    Tasks.addEventListener('remove', this.handleRemove);\n  }\n\n  componentWillUnmount() {\n    // @ts-ignore\n    Tasks.removeEventListener('progression', this.handleProgress);\n    // @ts-ignore\n    Tasks.removeEventListener('remove', this.handleRemove);\n  }\n\n  componentDidUpdate(prev_props: TaskModalProps) {\n    if (prev_props.open !== this.props.open) {\n      // Will reset key\n      let subscribed: TaskInformation[] = [];\n      const key = String(Math.random());\n\n      if (this.props.open) {\n        // Charge\n        subscribed = Tasks.subscribed;\n\n        Tasks.all.then(ts => {\n          // Le composant a changé d'état ouvert/fermé\n          if (this.state.key !== key) {\n            return;\n          }\n\n          const ids = new Set(subscribed.map(t => t.id));\n          // Fait la différence entre souscrit et actuelles\n          let unsub = ts.filter(t => !ids.has(t.id));\n\n          if (this.state.unsub) {\n            unsub = [...this.state.unsub, ...unsub];\n          }\n\n          this.setState({ unsub });\n        })\n        .catch(() => {\n          // impossible de charger\n          this.setState({ unsub: undefined });\n        })\n      }\n\n      this.setState({\n        key,\n        open: this.props.open,\n        subscribed,\n        unsub: null\n      });\n    }\n  }\n\n  handleClose = () => {\n    this.setState({\n      open: false\n    });\n    this.props.onClose();\n  }\n\n  handleProgress = (p: CustomEvent<TaskInformation>) => {\n    // handle \n    const t = this.state.subscribed.findIndex(t => t.id === p.detail.id);\n\n    if (t !== -1) {\n      const s = this.state.subscribed;\n      s[t] = p.detail;\n\n      this.setState({\n        subscribed: s\n      });\n    }\n  } \n\n  handleRemove = (p: CustomEvent<TaskBaseMessage>) => {\n    // handle remove task\n    // Remove task from subs/unsubs\n    const t = this.state.subscribed.filter(t => t.id !== p.detail.id);\n    const u = this.state.unsub ? this.state.unsub.filter(t => t.id !== p.detail.id) : [];\n\n    // Actualise composant\n    this.setState({\n      subscribed: t,\n      unsub: u\n    });\n  } \n\n  onSubChange = (is_sub: boolean, id: string) => {\n    if (is_sub) {\n      const old = this.state.unsub.find(t => t.id === id);\n\n      if (old) {\n        const unsub = this.state.unsub.filter(t => t.id !== id);\n        const sub = [...this.state.subscribed, old];\n\n        Tasks.subscribe(id);\n\n        this.setState({\n          unsub,\n          subscribed: sub\n        });\n      }\n    }\n    else {\n      const old = this.state.subscribed.find(t => t.id === id);\n\n      if (old) {\n        const subscribed = this.state.subscribed.filter(t => t.id !== id);\n\n        // Si la tâche est terminée, elle disparaît\n        let unsub: TaskInformation[];\n        if (old.percentage >= 100) {\n          unsub = this.state.unsub;\n        }\n        else {\n          unsub = this.state.unsub ? [...this.state.unsub, old] : [old];\n        }\n\n        Tasks.unsubscribe(id);\n\n        this.setState({\n          unsub,\n          subscribed\n        });\n      }\n    }\n  };\n\n  onCancel = (id: string) => {\n    const task = this.state.subscribed.findIndex(t => t.id === id);\n\n    if (task === -1) {\n      if (this.state.unsub) {\n        const unsubbed = this.state.unsub.findIndex(t => t.id === id);\n\n        if (unsubbed === -1) {\n          return;\n        }\n\n        // Cancel\n        const unsub = this.state.unsub.filter(t => t.id !== id);\n\n        Tasks.cancel(id);\n\n        this.setState({\n          unsub\n        });\n      }\n      return;\n    }\n\n    const subscribed = this.state.subscribed.filter(t => t.id !== id);\n    Tasks.cancel(id);\n    this.setState({\n      subscribed\n    });\n  };\n\n  generateOverTasks() {\n    const over = this.over_tasks;\n\n    return over.map(t => <Task \n      data={t} \n      key={\"oversub\" + t.id}\n      is_subscribed={true} \n      onSubChange={this.onSubChange} \n      onCancel={this.onCancel}\n    />);\n  }\n\n  generateSubscribed() {\n    const not_over = this.state.subscribed.filter(t => t.percentage < 100);\n\n    if (not_over.length === 0) {\n      return (\n        <div className={classes.no_sub}>\n          <Typography variant=\"h6\" className={classes.no_sub_text}>\n            You don't have any subscription.\n          </Typography>\n        </div>\n      );\n    }\n\n    return not_over.map(t => <Task \n      data={t} \n      key={\"sub\" + t.id}\n      is_subscribed={true} \n      onSubChange={this.onSubChange} \n      onCancel={this.onCancel}\n    />);\n  }\n\n  generateUnSub() {\n    if (Array.isArray(this.state.unsub)) {\n      return this.state.unsub.map(t => <Task \n        data={t} \n        key={\"unsub\" + t.id}\n        is_subscribed={false} \n        onSubChange={this.onSubChange} \n        onCancel={this.onCancel}\n      />);\n    }\n\n    // Error\n    return <div className={classes.error_load}>\n      Unable to load running tasks from server. Check your network.\n    </div>;\n  }\n\n  generateTasks() {\n    // Subscribed tasks\n    if (!this.state.open) {\n      return <div />;\n    }\n\n    const is_completed_tasks = this.over_tasks.length > 0;\n    const is_running_unsub_task = (this.state.unsub && this.state.unsub.length > 0) || this.state.unsub === undefined;\n\n    return (\n      <div>  \n        <Typography variant=\"h5\" className={classes.title}>\n          <SubscribedIcon className={classes.icon} /> <span>Subscribed</span>\n        </Typography>\n        {this.generateSubscribed()}\n    \n        {is_running_unsub_task && <Typography variant=\"h5\" className={classes.title}>\n         <UnSubbedIcon className={classes.icon} /> <span>Other running tasks</span>\n        </Typography>}\n        {this.generateUnSub()}\n\n        {is_completed_tasks && <Typography variant=\"h5\" className={classes.title}>\n          <CompletedIcon className={classes.icon} /> <span>Completed</span>\n        </Typography>}\n        {this.generateOverTasks()}\n      </div>\n    );\n  }\n\n  emptyTask() {\n    return (\n      <EmptyMessage main=\"Empty task list\" second=\"Tweet deletion tasks can be started through tweet explorer.\" icon={TimelineIcon} />\n    );\n  }\n\n  loadingState() {\n    return (\n      <CenterComponent className={classes.loader}>\n        <BigPreloader />\n      </CenterComponent>\n    );\n  }\n\n  get render_root() {\n    const is_empty = this.state.subscribed.length === 0 && this.state.unsub && this.state.unsub.length === 0;\n\n    if (this.state.unsub === null) {\n      return this.loadingState();\n    }\n    else if (is_empty) {\n      return this.emptyTask();\n    }\n    else if (this.state.open) {\n      return <Container className={classes.root} key={this.state.key}>\n        {this.generateTasks()}\n      </Container>;\n    }\n\n    return \"\";\n  }\n\n  render() {\n    return (\n      <Dialog fullScreen open={this.state.open} onClose={this.handleClose} TransitionComponent={Transition}>\n        <AppBar className={classes.app_bar}>\n          <Toolbar>\n            <Typography variant=\"h6\" className={classes.nav_title}>\n              Tasks\n            </Typography>\n            <Button color=\"inherit\" onClick={this.handleClose}>\n              close\n            </Button>\n          </Toolbar>\n        </AppBar>\n\n        {this.render_root}\n      </Dialog>\n    );\n  }\n\n  get over_tasks() {\n    return this.state.subscribed.filter(t => t.percentage >= 100)\n  }\n}\n","import React, { Component, ChangeEvent } from 'react';\nimport { Link, withRouter, RouteComponentProps } from 'react-router-dom';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport ExploreIcon from '@material-ui/icons/Explore';\nimport MailIcon from '@material-ui/icons/Mail';\nimport ArchiveIcon from '@material-ui/icons/FolderShared';\nimport TasksIcon from '@material-ui/icons/CheckBox';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport SearchIcon from '@material-ui/icons/Search';\nimport classes from './RouterWrapper.module.scss';\nimport { Badge } from '@material-ui/core';\nimport TaskModal from '../vues/TaskModal/TaskModal';\nimport Tasks, { TaskInformation, TaskBaseMessage } from '../../tools/Tasks';\n\nclass RouterWrapper extends Component {\n  state = {\n    value: 0,\n    pathMap: [\n      '/',\n      '/explore/',\n      '/search/',\n      '/dms/',\n      '/settings/',\n    ],\n    task_opens: false,\n    tasks_running: 0\n  };\n\n  internal_progress: Set<string> = new Set;\n\n  constructor(props: RouteComponentProps) {\n    super(props);\n    this.state.value = this.calculateCurrentValue(props);\n\n    props.history.listen(location => {\n      const value = this.calculateCurrentValue({ location });\n\n      if (value > -1 && value !== this.state.value) {\n        this.setState({\n          value\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    // @ts-ignore\n    Tasks.addEventListener('progression', this.handleTaskProgress);\n    // @ts-ignore\n    Tasks.addEventListener('unsubscribe', this.handleUnsubscribe);\n     // @ts-ignore\n    Tasks.addEventListener('remove', this.handleUnsubscribe);\n  }\n\n  componentWillUnmount() {\n    // @ts-ignore\n    Tasks.removeEventListener('progression', this.handleTaskProgress);\n    // @ts-ignore\n    Tasks.removeEventListener('unsubscribe', this.handleUnsubscribe);\n    // @ts-ignore\n    Tasks.removeEventListener('remove', this.handleUnsubscribe);\n  }\n\n  handleTaskProgress = (e: CustomEvent<TaskInformation>) => {\n    if (e.detail.percentage >= 100) {\n      if (this.internal_progress.has(e.detail.id)) {\n        this.internal_progress.delete(e.detail.id);\n\n        this.setState({\n          tasks_running: this.internal_progress.size\n        });\n      }\n    }\n    else {\n      if (!this.internal_progress.has(e.detail.id)) {\n        this.internal_progress.add(e.detail.id);\n\n        this.setState({\n          tasks_running: this.internal_progress.size\n        });\n      }\n    }\n  };\n\n  handleUnsubscribe = (e: CustomEvent<TaskBaseMessage>) => {\n    this.internal_progress.delete(e.detail.id);\n    this.setState({\n      tasks_running: this.internal_progress.size\n    });\n  };\n\n  calculateCurrentValue(props: { location: { pathname: string } }) {\n    const { pathname } = props.location;\n    const { pathMap } = this.state;\n\n    const value = pathMap.indexOf(pathname);\n\n    return value;\n  }\n\n  handleChange = (_: ChangeEvent, value: any) => {\n    // N'auth pas task\n    if (value in this.state.pathMap)\n      this.setState({ value });\n  };\n\n  handleModalOpen = () => {\n    this.setState({ task_opens: true });\n  }\n\n  handleModalClose = () => {\n    this.setState({ task_opens: false });\n  }\n\n  renderModalTasks() {\n    return <TaskModal open={this.state.task_opens} onClose={this.handleModalClose} />;\n  }\n\n  renderTaskIcon() {\n    if (this.state.tasks_running === 0) {\n      return <TasksIcon />;\n    }\n    \n    return (\n      <Badge badgeContent={this.state.tasks_running} color=\"primary\">\n        <TasksIcon />\n      </Badge>\n    );\n  }\n\n  render() {\n    const { value, pathMap } = this.state;\n\n    return (\n      <div>\n        {this.renderModalTasks()}\n\n        <BottomNavigation\n          value={value}\n          onChange={this.handleChange.bind(this)}\n          showLabels\n          className={\"nav primary \" + classes.stick_to_bottom + \" \" + classes.bottom_bar}\n        >\n          <BottomNavigationAction label=\"Archive\" icon={<ArchiveIcon />} component={Link} to={pathMap[0]} />\n          <BottomNavigationAction label=\"Explore\" icon={<ExploreIcon />} component={Link} to={pathMap[1]} />\n          <BottomNavigationAction label=\"Search\" icon={<SearchIcon />} component={Link} to={pathMap[2]} />\n          <BottomNavigationAction label=\"Direct Messages\" icon={<MailIcon />} component={Link} to={pathMap[3]} />\n          <BottomNavigationAction label=\"Settings\" icon={<SettingsIcon />} component={Link} to={pathMap[4]} />\n          <BottomNavigationAction label=\"Tasks\" icon={this.renderTaskIcon()} onClick={() => this.handleModalOpen()} />\n        </BottomNavigation>\n      </div>\n    );\n  }\n}\n\n// @ts-ignore\nexport default withRouter(RouterWrapper);\n","import React, { MouseEvent as RMouseEvent, ChangeEvent } from 'react';\nimport classes from './QuickDelete.module.scss';\nimport { Stepper, Step, StepLabel, Typography, Button, DialogTitle, DialogContent, DialogContentText, DialogActions, ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, FormGroup, FormControlLabel, Checkbox } from '@material-ui/core';\nimport SETTINGS from '../../../tools/Settings';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { getMonthText } from '../../../helpers';\nimport RoundIcon from '@material-ui/icons/Lens';\nimport Tasks from '../../../tools/Tasks';\n\ntype QuickDeleteProp = {\n  onClose?: (event?: RMouseEvent<HTMLButtonElement, MouseEvent>) => void;\n}\n\ntype QuickDeleteState = {\n  step: number;\n  selected: Set<string>;\n}\n\nexport default class QuickDelete extends React.Component<QuickDeleteProp, QuickDeleteState> {\n  state: QuickDeleteState = {\n    step: 0,\n    selected: new Set\n  };\n\n  index: { [year: string]: { [month: string]: string[] } } = {};\n\n  constructor(props: QuickDeleteProp) {\n    super(props);\n\n    // Build index from archive\n    const archive_index = SETTINGS.archive.index;\n\n    for (const [year, months] of Object.entries(archive_index.years)) {\n      if (!(year in this.index)) {\n        this.index[year] = {};\n      }\n\n      for (const [month, tweets] of Object.entries(months)) {\n        // tweets are indexed by ID\n        this.index[year][month] = Object.keys(tweets);\n      }\n    }\n  }\n\n  stepName(index: number) {\n    if (index) {\n      return \"Start task\";\n    }\n    return \"Select months\";\n  }\n\n  isYearSelected(year: string) {\n    for (const month of this.state.selected) {\n      const [_year, ] = month.split('-', 2);\n\n      if (year === _year) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  selectAYear(year: string) {\n    const months = Object.keys(this.index[year]).map(m => year + \"-\" + m);\n\n    for (const m of months) {\n      this.state.selected.add(m);\n    }\n\n    this.setState({\n      selected: this.state.selected\n    });\n  }\n\n  unselectAYear(year: string) {\n    const months = [...this.state.selected].filter(m => m.startsWith(year));\n\n    for (const m of months) {\n      this.state.selected.delete(m);\n    }\n\n    this.setState({\n      selected: this.state.selected\n    });\n  }\n\n  selectAll() {\n    const years = Object.keys(this.index);\n    years.forEach(y => this.selectAYear(y));\n  }\n\n  unselectAll() {\n    this.setState({\n      selected: new Set\n    });\n  }\n\n  get selected_count() {\n    return this.selected.length;\n  }\n\n  get selected() : string[] {\n    return [].concat(...[...this.state.selected].map(m => {\n      const [year, month] = m.split('-', 2);\n      return this.index[year][month];\n    }));\n  }\n\n  nextStep = () => {\n    this.setState({\n      step: this.state.step + 1\n    });\n  }\n\n  previousStep = () => {\n    this.setState({\n      step: this.state.step - 1\n    });\n  }\n\n  startErase = () => {\n    const tweets = this.selected;\n\n    Tasks.start(tweets);\n\n    if (this.props.onClose)\n      this.props.onClose();\n  }\n\n  taskStarter() {\n    const c = this.selected_count;\n\n    return (\n      <div className={classes.starter_container}>\n        <Typography variant=\"h6\">\n          Delete selected tweet{c > 1 ? \"s\" : \"\"} ?\n        </Typography>\n\n        <Typography className={classes.starter_details}>\n          <span className=\"bold\">{c}</span> tweet{c > 1 ? \"s\" : \"\"} will be <span className=\"bold\">permanently</span> deleted from Twitter. \n          Do you really want to do that ?\n        </Typography>\n      </div>\n    );\n  }\n\n  selectMonth = (e: ChangeEvent<HTMLInputElement>, checked: boolean) => {\n    const v = e.target.value;\n    const selected = this.state.selected;\n\n    if (checked) {\n      selected.add(v);\n    }\n    else {\n      selected.delete(v);\n    }\n\n    this.setState({\n      selected\n    });\n  };\n\n  generateMonthsOfYear(year: string) {\n    return (\n      <div>\n        <div className={classes.buttons_month}>\n          <Button color=\"primary\" onClick={() => this.selectAYear(year)}>\n            Select all\n          </Button>\n          <Button color=\"secondary\" onClick={() => this.unselectAYear(year)}>\n            Unselect all\n          </Button>\n        </div>\n\n        <FormGroup>\n          {Object.keys(this.index[year])\n            .sort((a, b) => Number(a) - Number(b))\n            .map(m => <FormControlLabel key={year + \"-\" + m}\n              control={<Checkbox \n                checked={this.state.selected.has(year + \"-\" + m)} \n                onChange={this.selectMonth} \n                value={year + \"-\" + m} \n              />}\n              label={getMonthText(m) + ` (${this.index[year][m].length})`}\n            />)}\n        </FormGroup>\n      </div>\n    );\n  }\n\n  generateYears() {\n    return Object.keys(this.index)\n      .sort((a, b) => Number(b) - Number(a))\n      .map(y => {\n        const is_selected = this.isYearSelected(y);\n\n        return (\n          <ExpansionPanel key={y}>\n            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n\n              <div className={classes.header_container}>\n                <Typography className={classes.heading}>{y}</Typography>\n                {is_selected ? <RoundIcon className={classes.icon + \" \" + classes.icon_lens} />  : \"\"}\n              </div>\n              \n            </ExpansionPanelSummary>\n            <ExpansionPanelDetails>\n              {this.generateMonthsOfYear(y)}\n            </ExpansionPanelDetails>\n          </ExpansionPanel>\n        )\n      });\n  }\n\n  monthSelector() {\n    const c = this.selected_count;\n\n    return (\n      <div className={classes.month_selector_root}>\n        <Typography className={classes.count}>\n          <span className=\"bold\">{c}</span> tweet{c > 1 ? \"s\" : \"\"} selected.\n        </Typography>\n\n        {this.generateYears()}\n\n        <div className={classes.select_all_holder}>\n          <Button color=\"primary\" onClick={() => this.selectAll()}>\n            Select all\n          </Button>\n          <Button color=\"secondary\" onClick={() => this.unselectAll()}>\n            Unselect all\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  renderStepper() {\n    return (\n      <div className={classes.content}>\n        <Stepper activeStep={this.state.step} className={classes.stepper}>\n          <Step>\n            <StepLabel>{this.stepName(0)}</StepLabel>\n          </Step>\n          <Step>\n            <StepLabel>{this.stepName(1)}</StepLabel>\n          </Step>\n        </Stepper>\n        <div>\n          {this.state.step ? this.taskStarter() : this.monthSelector()}\n        </div>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div>\n        <DialogTitle>Quick delete</DialogTitle>\n        <DialogContent dividers>\n          {this.renderStepper()}\n        </DialogContent>\n        <DialogActions className={classes.actions}>\n          <Button onClick={this.props.onClose}>\n            Close\n          </Button>\n\n          {this.state.step > 0 ? <Button color=\"primary\" onClick={this.previousStep}>\n            Previous\n          </Button> : <div />}\n\n          {this.state.step === 0 && <Button \n            color=\"primary\" \n            disabled={this.state.selected.size === 0}\n            onClick={this.nextStep}\n            className={classes.to_end}\n          >\n            Next\n          </Button>}\n\n          {this.state.step > 0 && <Button \n            color=\"secondary\" \n            onClick={this.startErase} \n            className={classes.to_end}\n          >\n            Erase tweets\n          </Button>}\n        </DialogActions>\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Button from '@material-ui/core/Button';\nimport styles from './Archive.module.scss';\nimport { setPageTitle, dateFormatter } from '../../../helpers';\nimport { AppBar, Toolbar, Typography, Card, CardContent, CardActions, Container, CircularProgress, Divider, Dialog } from '@material-ui/core';\nimport { CenterComponent } from '../../../tools/PlacingComponents';\nimport SETTINGS from '../../../tools/Settings';\nimport TwitterArchive, { ArchiveReadState } from 'twitter-archive-reader';\nimport UserCache from '../../../classes/UserCache';\nimport { THRESHOLD_PREFETCH } from '../../../const';\nimport { Link } from 'react-router-dom';\nimport QuickDelete from '../QuickDelete/QuickDelete';\n\ntype ArchiveState = {\n  loaded: string;\n  is_error: boolean;\n  in_load: string;\n  loading_state: ArchiveReadState | \"prefetch\";\n  quick_delete_open: boolean;\n};\n\nexport default class Archive extends React.Component<{}, ArchiveState> {\n  state: ArchiveState;\n\n  /** True if the component is mounted. false when unmounted (don't use setState !). */\n  active = true;\n\n  constructor(props: any) {\n    super(props);\n\n    // Initiate the state the component should have\n    this.state = {\n      loaded: SETTINGS.archive_name,\n      loading_state: \"reading\",\n      is_error: false,\n      in_load: SETTINGS.archive_in_load,\n      quick_delete_open: false,\n    };\n\n    // Subscribe to archive readyness when in load\n    if (this.state.in_load) {\n      this.state.loading_state = SETTINGS.archive.state;\n      this.checkOnReadyArchive();\n    }\n  }\n\n  // Subscribe to archive readyness\n  checkOnReadyArchive() {\n    SETTINGS.archive.onready = async () => {\n      const name = this.state.in_load;\n\n      SETTINGS.archive_name = name;\n      SETTINGS.archive_in_load = \"\";\n\n      if (!SETTINGS.archive.is_gdpr) {\n        SETTINGS.only_videos = false;\n      }\n\n      // Reset le statut \"utilisateurs impossibles à trouver\"\n      UserCache.clearFailCache();\n\n      // Récupère les personnes qui apparaissent plus de \n      // THRESHOLD_PREFETCH fois dans l'archive pour les précharger\n      // (permet de voir leur PP sans DL les tweets)\n      const users_in_archive: { [userId: string]: number } = {\n        [SETTINGS.archive.owner]: THRESHOLD_PREFETCH\n      };\n\n      for (const t of SETTINGS.archive.all) {\n        const rt = t.retweeted_status ? t.retweeted_status : t;\n\n        if (rt.user.id_str in users_in_archive) {\n          users_in_archive[rt.user.id_str]++;\n        }\n        else {\n          users_in_archive[rt.user.id_str] = 1;\n        }\n      }\n\n      // Récupère les utilisateurs apparaissant plus de THRESHOLD_PREFETCH fois\n      const most_actives = Object.entries(users_in_archive)\n        .filter(([_, c]) => c >= THRESHOLD_PREFETCH)\n        .map(([id, ]) => id);\n\n      const cache_dl = UserCache.prefetch(most_actives);\n\n      // Préfetch si actif\n      if (this.active) {\n        this.setState({\n          loading_state: \"prefetch\"\n        });\n\n        // Lance le DL\n        try {\n          await cache_dl;\n        } catch (e) { }\n         \n        // Terminé, composant prêt !\n        if (this.active)\n          this.setState({\n            loaded: name,\n            in_load: \"\"\n          });\n      }\n    };\n\n    SETTINGS.archive.onerror = () => {\n      if (this.active)\n        this.setState({\n          is_error: true,\n          in_load: \"\"\n        });\n      \n      SETTINGS.archive = undefined;\n      SETTINGS.archive_in_load = \"\";\n    };\n\n    // Subscribe for archive loading states\n    SETTINGS.archive.onzipready = () => {\n      if (this.active)\n        this.setState({ // Skip user load (very fast)\n          loading_state: \"tweet_read\"\n        });\n    };\n    SETTINGS.archive.ontweetsread = () => {\n      if (this.active)\n        this.setState({\n          loading_state: \"indexing\"\n        });\n    };\n    SETTINGS.archive.onwillreaddm = () => {\n      if (this.active)\n        this.setState({\n          loading_state: \"dm_read\"\n        });\n    };\n    SETTINGS.archive.onwillreadextended = () => {\n      if (this.active)\n        this.setState({\n          loading_state: \"extended_read\"\n        });\n    };\n  }\n\n  componentDidMount() {\n    setPageTitle();\n  }\n\n  componentWillUnmount() {\n    this.active = false;\n  }\n\n  // Load archive inside SETTINGS.archive\n  loadArchive(e: React.ChangeEvent<HTMLInputElement>) {\n    if (e.target.files.length) {\n      const f = e.target.files[0];\n\n      SETTINGS.archive = new TwitterArchive(f, true);\n\n      this.setState({\n        loaded: \"\",\n        in_load: f.name,\n        is_error: false,\n        loading_state: \"reading\"\n      });\n      SETTINGS.archive_name = \"\";\n      SETTINGS.archive_in_load = f.name;\n\n      this.checkOnReadyArchive();\n    }\n  }\n\n  getLoadingMessage() {\n    switch (this.state.loading_state) {\n      case \"dm_read\":\n        return \"Reading direct messages\";\n      case \"extended_read\":\n        return \"Reading favorites, moments, and other informations\";\n      case \"indexing\":\n        return \"Indexing tweets\";\n      case \"reading\":\n        return \"Unzipping\";\n      case \"tweet_read\":\n        return \"Reading tweets\";\n      case \"user_read\":\n        return \"Reading user informations\";\n      case \"prefetch\":\n        return \"Gathering user informations\";\n    }\n  }\n\n  calcTruncated() {\n    const l = this.state.loaded.length;\n    if (l > 40) {\n      const p1 = this.state.loaded.slice(0, 13);\n      const p2 = this.state.loaded.slice(l - 10, l);\n      \n      return `${p1}...${p2}`;\n    }\n    return this.state.loaded;\n  }\n\n  emptyArchive() {\n    return (\n      <div>\n        <Typography className={styles.title} variant=\"h5\" component=\"h2\" color=\"textSecondary\">\n          Load an archive\n        </Typography>\n\n        <Typography>\n          You don't have any archive loaded. Load an archive using the \"load archive\" button.\n        </Typography>\n      </div>\n    );\n  }\n\n  errorLoad() {\n    return (\n      <div>\n        <Typography variant=\"h5\" component=\"h2\" className={styles.title} color=\"error\">\n          Error\n        </Typography>\n\n        <Typography>\n          Archive couldn't be loaded. Please load a new archive with the required format.\n        </Typography>\n      </div>\n    );\n  }\n\n  loaded() {\n    return (\n      <div>\n        <Typography variant=\"h5\" component=\"h2\" className={styles.title}>\n          <span className={styles.filename}>{this.calcTruncated()}</span> is loaded.\n        </Typography>\n\n        <Typography>\n          Archive created on {\n            dateFormatter(\"Y-m-d\", new Date(SETTINGS.archive.index.archive.created_at))\n          } by {SETTINGS.archive.index.info.full_name} • <span className={styles.bio}>@{SETTINGS.archive.owner_screen_name}</span>.\n        </Typography>\n\n        <Typography>\n          Account #<span className={styles.bold}>{SETTINGS.archive.index.info.id}</span> created at {\n            dateFormatter(\"Y-m-d H:i\", new Date(SETTINGS.archive.index.info.created_at))\n          }.\n        </Typography>\n\n        <Typography variant=\"h6\" style={{marginTop: '.5rem'}}>\n          <span className={styles.bold}>{SETTINGS.archive.length}</span> tweets\n        </Typography>\n\n        { SETTINGS.archive.is_gdpr &&\n          <Typography style={{marginTop: '.3rem'}} className={styles.dmsinfowrapper}>\n            <span className={styles.dmsinfo}>{SETTINGS.archive.messages.count}</span> direct messages in \n            <span className={styles.dmsinfo}> {SETTINGS.archive.messages.length}</span> conversations\n          </Typography>\n        }\n\n        <Divider className=\"divider-margin\" />\n\n        <Typography>\n          <span className={styles.bio}>{SETTINGS.archive.index.info.bio}</span>\n        </Typography>\n\n        {!SETTINGS.is_owner && <div>\n          <Divider className=\"divider-margin\" />\n\n          <Typography className={styles.cannot_delete}>\n            You don't own this archive, you aren't able to delete tweets from it.\n          </Typography>\n        </div>}\n\n        {SETTINGS.is_owner && SETTINGS.expired && <div>\n          <Divider className=\"divider-margin\" />\n\n          <Typography className={styles.cannot_delete}>\n            Twitter credentials have expired, you aren't able to delete tweets.  \n            Log out and in again in <Link to=\"/settings/\">Settings</Link>.\n          </Typography>\n        </div>}\n      </div>\n    );\n  }\n\n  inLoad() {\n    const msg = this.getLoadingMessage();\n    console.log(msg);\n\n    return (\n      <div>\n        <Typography variant=\"h5\" component=\"h2\" className={styles.title}>\n          Loading...\n        </Typography>\n        <Typography className={styles.subtitle}>\n          {msg}\n        </Typography>\n\n        <CenterComponent>\n          <CircularProgress />\n        </CenterComponent>\n      </div>\n    );  \n  }\n\n  loadButton() {\n    return (\n      <div className=\"center-space-between\">\n        <Button color=\"primary\" onClick={() => (this.element.querySelector('[data-archive-input]') as HTMLElement).click()}>\n          Load{this.state.loaded || this.state.is_error ? \" another\" : \"\"} archive\n        </Button>\n        <input type=\"file\" data-archive-input=\"\" onChange={(e) => this.loadArchive(e)} hidden />\n\n        {this.state.loaded && SETTINGS.can_delete && this.buttonQuickDelete()}\n      </div>\n    );\n  }\n\n  buttonQuickDelete() {\n    return (\n      <Button color=\"secondary\" onClick={this.handleModalOpen}>\n        Quick delete\n      </Button>\n    );\n  }\n\n  handleModalOpen = () => {\n    this.setState({ quick_delete_open: true });\n  }\n\n  handleModalClose = () => {\n    this.setState({ quick_delete_open: false });\n  }\n\n  modalQuickDelete() {\n    return (\n      <Dialog\n        open={this.state.quick_delete_open}\n        onClose={this.handleModalClose}\n        scroll=\"body\"\n        classes={{\n          paper: styles.modal_paper\n        }}\n      >\n        {this.state.quick_delete_open ? <QuickDelete onClose={this.handleModalClose} /> : \"\"}\n      </Dialog>\n    );\n  }\n\n  loadRightContent() {\n    if (this.state.loaded) {\n      // Chargée\n      return this.loaded();\n    }\n    else if (this.state.in_load) {\n      // En charge\n      return this.inLoad();\n    }\n    else if (this.state.is_error) {\n      // Si erreur\n      return this.errorLoad();\n    }\n    else {\n      // Aucune chargée\n      return this.emptyArchive();\n    }\n  }\n  \n  render() {\n    return (\n      <div className={styles.root}>\n        <AppBar position=\"static\">\n          <Toolbar>\n            <Typography variant=\"h6\" color=\"inherit\">\n              Archive\n            </Typography>\n          </Toolbar>\n        </AppBar>\n\n        {this.modalQuickDelete()}\n  \n        <Container maxWidth=\"sm\" className={styles.center}>\n          <CenterComponent>\n            <Card className={styles.card}>\n              <CardContent>\n                {this.loadRightContent()}\n              </CardContent>\n              <CardActions>\n                {!this.state.in_load && this.loadButton()}\n              </CardActions>\n            </Card>\n          </CenterComponent>\n        </Container>\n      </div>\n    );\n  }\n\n  get element() {\n    return ReactDOM.findDOMNode(this) as Element;\n  }\n}\n","import React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Error from '@material-ui/icons/Error';\nimport Grid from '@material-ui/core/Grid';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Fab, CircularProgress, Divider } from '@material-ui/core';\nimport { blue, red } from '@material-ui/core/colors';\nimport sign_in_twitter from '../../../assets/sign-in-with-twitter-link.png';\nimport APIHELPER from '../../../tools/ApiHelper';\nimport { RequestTokenRequest } from '../../../tools/interfaces';\nimport { setPageTitle } from '../../../helpers';\nimport classes from './Login.module.scss';\nimport { IMG_PREFIX, IMG_LIST } from '../../../const';\n\nconst classes_a = classes;\n\nfunction Copyright() {\n  return (\n    <div>\n      <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n        Archive Explorer is an open-source tool made by <Link \n          color=\"inherit\" \n          href=\"https://alkihis.fr/\" \n          className={classes.underline}\n        >\n          Alkihis\n        </Link>.\n      </Typography>\n\n      <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\" className={classes.legal_text}>\n        Using <span className=\"bold\">Sign in with Twitter</span>, you allow\n        <span className=\"bold\"> Archive Explorer</span> to store your Twitter credentials\n        and your login details like current date or IP address. \n      </Typography>\n\n      <Divider className=\"divider-big-margin\" />\n\n      <Typography variant=\"body2\" align=\"center\" className={classes.github_header}>\n        GitHub links\n      </Typography>\n\n      <div className={classes.github_links}>\n        <GithubLogo url=\"https://github.com/alkihis/archive-explorer-node\" text=\"Server\" />\n\n        <GithubLogo url=\"https://github.com/alkihis/archive-explorer-web\" text=\"Client\" />\n\n        <GithubLogo url=\"https://github.com/alkihis/twitter-archive-reader\" text=\"Archive reader\" />\n      </div>\n    </div>\n  );\n}\n\nconst IMG_CHOOSEN = IMG_PREFIX + IMG_LIST[Math.floor(Math.random()*IMG_LIST.length)];\n\nfunction GithubLogo(props: { url: string, text: string }) {\n  return (\n    <a rel=\"noopener noreferrer\" target=\"_blank\" className={classes.github_container} href={props.url}>\n      <img src=\"/assets/github_logo.png\" className={classes.github_img} />\n      <span className={classes.github_text}>{props.text}</span>\n    </a>\n  );\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100vh',\n  },\n  image: {\n    backgroundImage: `url(${IMG_CHOOSEN})`,\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover',\n    backgroundPosition: 'center',\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.primary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  wrapper: {\n    margin: theme.spacing(1),\n    position: 'relative',\n    marginTop: \"30px\",\n  },\n  buttonSuccess: {\n    backgroundColor: blue[500],\n    '&:hover': {\n      backgroundColor: blue[700],\n    },\n  },\n  buttonError: {\n    backgroundColor: red[500],\n    '&:hover': {\n      backgroundColor: red[700],\n    },\n  },\n  fabProgress: {\n    color: red[300],\n    position: 'absolute',\n    top: -6,\n    left: -6,\n    zIndex: 1,\n  },\n  alignC: {\n    textAlign: 'center',\n  },\n  progress: {\n    margin: theme.spacing(2),\n  },\n  twitterImg: {\n    \n  }\n}));\n\nexport default function Login() {\n  setPageTitle(\"Login\");\n  const classes = useStyles({});\n\n  const [loading, setLoading] = React.useState(true);\n  const [success, setSuccess] = React.useState(false);\n  const [error, setError] = React.useState(false);\n  const [twitter_button, setLink] = React.useState(\"\");\n\n  function handleButtonClick() {\n    if (!loading && !success) {\n      setSuccess(false);\n      setLoading(true);\n      setError(false);\n      \n      // Load through API\n      runGetter();\n    }\n  }\n\n  function runGetter() {\n    APIHELPER.request('users/request', { method: 'POST' })\n      .then((data: RequestTokenRequest) => {\n        setLoading(false);\n\n        setLink(data.url);\n        localStorage.setItem('save_token_secret', data.oauth_token_secret);\n      })\n      .catch(e => {\n        setLoading(false);\n        setError(true);\n      });\n  }\n\n  if (loading) {\n    runGetter();\n  }\n\n  return (\n    <Grid container component=\"main\" className={classes.root}>\n      <CssBaseline />\n      <Grid item xs={false} sm={4} md={7} className={classes.image} />\n      <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\n        <div className={classes.paper}>\n          <Avatar className={classes.avatar}>\n            <FolderOpenIcon />\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">\n            Archive Explorer\n          </Typography>\n\n          <Typography component=\"h3\" variant=\"h6\" className={classes_a.catch_phrase}>\n            Explore through time, browse your old direct messages and\n            quickly delete embarrassing tweets.\n          </Typography>\n\n          <div className={classes.form}>\n            <div className={classes.wrapper + \" \" + classes.alignC}>\n              {loading ? <CircularProgress className={classes.progress} />\n              : (error ? <div>\n                  <Fab\n                    aria-label=\"save\"\n                    color=\"primary\"\n                    className={error ? classes.buttonError : classes.buttonSuccess}\n                    onClick={handleButtonClick}\n                  >\n                    <Error />\n                  </Fab>\n                  <p>\n                    An error occured.\n                  </p>\n                </div>\n                : \"\")\n              }\n              {twitter_button ? <div>\n                <a href={twitter_button} className={classes_a.twitter_link}>\n                  <img src={sign_in_twitter} alt=\"Sign in with Twitter\" className={classes.twitterImg + \" \" + classes_a.twitter_img} />\n                </a>\n              </div> : \"\"}\n            </div>\n        \n            <Box mt={5}>\n              <Copyright />\n            </Box>\n          </div>\n        </div>\n      </Grid>\n    </Grid>\n  );\n}","import React from 'react';\nimport './FinalizeLogin.scss';\nimport { RouteComponentProps } from 'react-router';\nimport { BigPreloader, CenterComponent, internalError } from '../../tools/PlacingComponents';\nimport { setPageTitle } from '../../helpers';\nimport { Typography } from '@material-ui/core';\nimport APIHELPER from '../../tools/ApiHelper';\nimport SETTINGS from '../../tools/Settings';\n\nexport default class FinalizeLogin extends React.Component {\n  state: { in_load: boolean, failed: boolean, has_token: boolean };\n\n  protected save_token_secret = localStorage.getItem(\"save_token_secret\");\n  protected oauth_token: string;\n  protected oauth_verifier: string;\n\n  constructor(props: RouteComponentProps) {\n    super(props);\n    setPageTitle(\"Login\");\n\n    const query_string = props.location.search.split('?')[1];\n\n    if (query_string) {\n      const params: { [k: string]: string } = {};\n\n      for (const pair of query_string.split('&')) {\n        const [key, value] = pair.split('=', 2);\n        params[key] = value;\n      }\n\n      if ('oauth_token' in params) {\n        this.oauth_token = params.oauth_token;\n      }\n      if ('oauth_verifier' in params) {\n        this.oauth_verifier = params.oauth_verifier;\n      }\n    }\n\n    this.state = { \n      in_load: true, \n      failed: false,\n      has_token: !!this.save_token_secret && !!this.oauth_token && !!this.oauth_verifier\n    };\n  }\n\n  componentDidMount() {\n    // Validating access token\n    console.log(this.state);\n\n    if (this.state.has_token) {\n      // Validating...\n      const req = APIHELPER.request('users/access', {\n        parameters: {\n          oauth_token: this.oauth_token,\n          oauth_verifier: this.oauth_verifier,\n          oauth_token_secret: this.save_token_secret\n        },\n        method: 'POST',\n        auth: false,\n        body_mode: 'form-encoded'\n      });\n\n      req\n        .then((login_data: { status: boolean, token: string }) => {\n          SETTINGS.token = login_data.token;\n          window.location.pathname = \"/\";\n        })\n        .catch(() => this.setState({ in_load: false, failed: true }));\n    }\n  }\n\n  renderWaiting() {\n    return (\n      <div>\n        <BigPreloader />\n        <Typography color=\"textPrimary\" style={{marginTop: '30px'}}>\n          Checking your Twitter account...\n        </Typography>\n      </div>\n    );\n  }\n\n  renderTokenMiss() {\n    return internalError(\"Missing token\", \"In order to authentificate, Twitter need to send some credentials. They're missing.\", true);\n  }\n\n  renderFailed() {\n    return internalError(\"Invalid request\", \"Request is invalid, or token has expired. Try to log in again.\", true);\n  }\n\n  render() {\n    return (\n      <div className=\"FinalizeLogin\">\n        <CenterComponent style={{height: '100vh'}}>\n          {this.state.has_token ? (\n            this.state.in_load ? \n            this.renderWaiting() :\n            this.renderFailed()\n          ) : \n            this.renderTokenMiss()\n          }\n        </CenterComponent>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './NotFound.scss';\nimport { RouteComponentProps } from 'react-router';\nimport { setPageTitle } from '../../../helpers';\nimport { CenterComponent, internalError } from '../../../tools/PlacingComponents';\n\nconst NotFound = (props: RouteComponentProps) => {\n  setPageTitle(\"Page Not Found\");\n\n  return (\n    <CenterComponent style={{height: '100vh', textAlign: 'center'}}>\n      {internalError(`Page not found`, `You tried to show ${props.location.pathname}, but this page does not exists.`)}\n    </CenterComponent>\n  );\n}\n\nexport default NotFound;\n","import React from 'react';\nimport { Button, Menu, MenuItem, Dialog, DialogTitle, DialogContent, DialogActions, DialogContentText, ExpansionPanel, ExpansionPanelSummary, Typography, ExpansionPanelDetails } from '@material-ui/core';\nimport { IToken } from '../../../tools/interfaces';\nimport { CenterComponent, BigPreloader } from '../../../tools/PlacingComponents';\nimport APIHELPER from '../../../tools/ApiHelper';\nimport SETTINGS from '../../../tools/Settings';\nimport { toast } from '../../shared/Toaster/Toaster';\nimport classes from './ExtendedActions.module.scss';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { dateFormatter } from '../../../helpers';\n\ntype MState = {\n  anchor: HTMLElement;\n  modal_token: boolean;\n  modal_delete_1: boolean;\n  modal_delete_2: boolean;\n  delete_preloader: boolean;\n  tokens: IToken[] | null;\n};\n\nexport default class ExtendedActionsMenu extends React.Component<{}, MState> {\n  state: MState = {\n    anchor: null,\n    modal_token: false,\n    modal_delete_1: false,\n    modal_delete_2: false,\n    delete_preloader: false,\n    tokens: null,\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    this.setState({\n      anchor: event.currentTarget\n    });\n  }\n\n  handleClose = () => {\n    this.setState({\n      anchor: null\n    });\n  }\n\n  openGestionToken = () => {\n    this.setState({\n      anchor: null,\n      modal_token: true,\n      tokens: null\n    });\n\n    APIHELPER.request('users/tokens/show')\n      .then(t => {\n        this.setState({\n          tokens: t\n        });\n      })\n      .catch(() => {\n        toast(\"Unable to load sessions. Try again later\", \"error\");\n      });\n  }\n\n  closeGestionToken = () => {\n    this.setState({\n      modal_token: false\n    });\n  }\n\n  openModalOne = () => {\n    this.setState({\n      anchor: null,\n      modal_delete_1: true\n    });\n  }\n\n  closeModalOne = () => {\n    this.setState({\n      modal_delete_1: false\n    });\n  }\n\n  openModalTwo = () => {\n    this.setState({\n      anchor: null,\n      modal_delete_1: false,\n      modal_delete_2: true,\n      delete_preloader: false\n    });\n  }\n\n  closeModalTwo = () => {\n    this.setState({\n      modal_delete_2: false,\n      delete_preloader: false\n    });\n  }\n\n  closeAndDelete = () => {\n    // Show preloader\n    this.setState({\n      delete_preloader: true\n    });\n\n    // Delete account\n    APIHELPER.request('users/destroy', { method: 'POST' })\n      .then(() => {\n        localStorage.clear();\n        SETTINGS.reload();\n      })\n      .catch(() => {\n        toast(\"Unable to delete account. Check your network.\", \"error\");\n      });\n\n    // Close modal\n    this.closeModalTwo();\n  }\n\n  revokeToken(id: string) {\n    this.setState({\n      tokens: this.state.tokens.filter(t => t.token !== id)\n    });\n\n    APIHELPER.request('users/tokens/revoke', { method: 'POST', parameters: { token: id } })\n      .catch(() => {\n        toast(\"Unable to revoke token. Try again later.\", \"error\");\n      });\n  }\n\n  generateSessions() {\n    return this.state.tokens.map((e, index) => (\n      <ExpansionPanel className={classes.panel} key={e.token}>\n        <ExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n        >\n          <Typography className={classes.heading}>\n            Session <span className=\"bold\">{index + 1}</span>\n            {\"current\" in e ? <span className=\"bold\"> (current)</span> : \"\"}\n          </Typography>\n        </ExpansionPanelSummary>\n        <ExpansionPanelDetails className={classes.details}>\n          <Typography>\n            Session created on <span className=\"bold\">{dateFormatter(\"Y-m-d\", new Date(e.date))} </span> \n            with IP address <span className=\"bold\">{e.login_ip}</span>.\n          </Typography>\n          <Typography>\n            Last use on <span className=\"bold\">{dateFormatter(\"Y-m-d\", new Date(e.last_use))}</span>.\n          </Typography>\n\n          <Button color=\"secondary\" onClick={() => this.revokeToken(e.token)} className={classes.revoke_btn}>\n            Revoke\n          </Button>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    ));\n  }\n\n  generateBaseSessions() {\n    if (this.state.tokens === null) {\n      return (\n        <CenterComponent className={classes.loader_sessions}>\n          <BigPreloader />\n        </CenterComponent>\n      );\n    }\n    else if (this.state.tokens.length === 0) {\n      return (\n        <Typography variant=\"h6\">\n          You don't any open session.\n        </Typography>\n      );\n    }\n    else {\n      return this.generateSessions();\n    }\n  }\n\n  modalGestionToken() {\n    return (\n      <Dialog\n        open={true}\n        onClose={this.closeGestionToken}\n        classes={{\n          paper: classes.dialog\n        }}\n      >\n        <DialogTitle>Sessions</DialogTitle>\n        <DialogContent>\n          {this.generateBaseSessions()}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={this.closeGestionToken} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  modalDeleteOne() {\n    return (\n      <Dialog\n        open={true}\n        onClose={this.closeModalOne}\n      >\n        <DialogTitle>Delete your account ?</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            You will be disconnect from every device you've used to explore archives.\n            Are you sure you want to continue ?\n          </DialogContentText>\n          <DialogContentText>\n            You can re-create an account later using the <span className=\"bold\">Sign in with Twitter</span> button.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={this.closeModalOne} color=\"primary\" autoFocus>\n            Cancel\n          </Button>\n          <Button onClick={this.openModalTwo} color=\"secondary\">\n            Continue\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  modalDeleteConfirm() {\n    const content = <div>\n      <DialogTitle>Delete your account ?</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Please confirm your action.\n        </DialogContentText>\n        <DialogContentText>\n          <span className=\"bold\">If you currently have running tasks, they will be cancelled.</span>\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={this.closeModalTwo} color=\"primary\" autoFocus>\n          Cancel\n        </Button>\n        <Button onClick={this.closeAndDelete} color=\"secondary\">\n          Delete account\n        </Button>\n      </DialogActions>\n    </div>;\n\n    const preloader = <div style={{}}>\n      <CenterComponent>\n        <BigPreloader />\n      </CenterComponent>\n    </div>;\n\n    return (\n      <Dialog\n        open={true}\n        onClose={this.closeModalTwo}\n      >\n        {this.state.delete_preloader ? preloader : content}\n      </Dialog>\n    );\n  }\n\n  render() {\n    return (\n      <div style={{ marginTop: '1rem', marginBottom: '1rem' }}>\n        {this.state.modal_token && this.modalGestionToken()}\n        {this.state.modal_delete_1 && this.modalDeleteOne()}\n        {this.state.modal_delete_2 && this.modalDeleteConfirm()}\n\n        <Button onClick={this.handleClick} color=\"primary\">\n          Advanced settings\n        </Button>\n        <Menu\n          anchorEl={this.state.anchor}\n          keepMounted\n          open={Boolean(this.state.anchor)}\n          onClose={this.handleClose}\n        >\n          <MenuItem onClick={this.openGestionToken}>Open sessions</MenuItem>\n          <MenuItem onClick={this.openModalOne}>Delete my account</MenuItem>\n        </Menu>\n      </div>\n    );\n  }\n}","import React from 'react';\nimport classes from './Settings.module.scss';\nimport { setPageTitle, dateFormatter } from '../../../helpers';\nimport { AppBar, Toolbar, Typography, Container, Checkbox, FormControlLabel, FormLabel, FormControl, FormGroup, Button, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Tooltip, Avatar } from '@material-ui/core';\nimport SETTINGS from '../../../tools/Settings';\nimport IIcon from '@material-ui/icons/Info';\nimport ExtendedActionsMenu from './ExtendedActionsMenu';\n\ntype SettingsState = {\n  only_medias: boolean;\n  only_videos: boolean;\n  download: boolean;\n  only_rts: boolean;\n  modal_open: boolean;\n  pp: boolean;\n  sort_reverse_chrono: boolean;\n}\n\nexport default class Settings extends React.Component<{}, SettingsState> {\n  state: SettingsState = {\n    only_medias: SETTINGS.only_medias,\n    only_videos: SETTINGS.only_videos,\n    download: SETTINGS.tweet_dl,\n    only_rts: SETTINGS.only_rts,\n    modal_open: false,\n    pp: SETTINGS.pp,\n    sort_reverse_chrono: SETTINGS.sort_reverse_chrono,\n  };\n\n  changeMediaState(v: boolean) {\n    this.setState({\n      only_medias: v\n    });\n    SETTINGS.only_medias = v;\n  }\n\n  changeVideoState(v: boolean) {\n    this.setState({\n      only_videos: v\n    });\n    SETTINGS.only_videos = v;\n  }\n\n  changeTweetDLState(v: boolean) {\n    this.setState({\n      download: v\n    });\n    SETTINGS.tweet_dl = v;\n  }\n\n  changeRTState(v: boolean) {\n    this.setState({\n      only_rts: v\n    });\n    SETTINGS.only_rts = v;\n  }\n\n  changePPState(v: boolean) {\n    this.setState({\n      pp: v\n    });\n    SETTINGS.pp = v;\n  }\n\n  changeTweetSortReverse(v: boolean) {\n    this.setState({\n      sort_reverse_chrono: v\n    });\n    SETTINGS.sort_reverse_chrono = v;\n  }\n\n  componentDidMount() {\n    setPageTitle(\"Settings\");\n  }\n\n  tweetViewSettings() {\n    return (\n      <FormControl component=\"fieldset\">\n        <FormLabel focused style={{marginTop: '1rem', marginBottom: '.5rem'}}>Media settings</FormLabel>\n        <FormGroup>\n          <FormControlLabel\n            value=\"media\"\n            control={\n              <Checkbox \n                color=\"primary\"\n                checked={this.state.only_medias}\n                onChange={(_, c) => this.changeMediaState(c)} \n              />\n            }\n            label=\"Show only tweets with medias\"\n            labelPlacement=\"end\"\n          />\n          \n          {/* Tooltip + Checkbox disabled */}\n          <div style={{display: 'flex', alignItems: 'center'}}>\n            <FormControlLabel\n              value=\"media\"\n              control={\n                <Checkbox \n                  color=\"primary\" \n                  checked={this.state.only_videos}\n                  onChange={(_, c) => this.changeVideoState(c)}\n                />\n              }\n              disabled={!!SETTINGS.archive && !SETTINGS.archive.is_gdpr}\n              label=\"Show only tweets with videos or GIFs\"\n              labelPlacement=\"end\"\n            />\n            {!!SETTINGS.archive && !SETTINGS.archive.is_gdpr && \n            <Tooltip classes={{\n              tooltip: classes.big_text,\n              popper: classes.big_text\n            }} title=\"This filter is not available with a classic archive\">\n              <IIcon className={classes.icon} />\n            </Tooltip>}\n          </div>\n        </FormGroup>\n\n        <FormLabel focused style={{marginTop: '1rem', marginBottom: '.5rem'}}>Tweet settings</FormLabel>\n        <FormGroup>\n          <FormControlLabel\n            value=\"media\"\n            control={\n              <Checkbox \n                color=\"primary\" \n                checked={this.state.sort_reverse_chrono}\n                onChange={(_, c) => this.changeTweetSortReverse(c)}\n              />\n            }\n            label=\"Sort tweets by more recent\"\n            labelPlacement=\"end\"\n          />\n\n          <FormControlLabel\n            value=\"media\"\n            control={\n              <Checkbox \n                color=\"primary\" \n                checked={this.state.download}\n                onChange={(_, c) => this.changeTweetDLState(c)}\n                disabled={SETTINGS.expired}\n              />\n            }\n            label=\"Download tweets from Twitter (gives more accurate infos)\"\n            labelPlacement=\"end\"\n          />\n\n          <FormControlLabel\n            value=\"media\"\n            control={\n              <Checkbox \n                color=\"primary\" \n                checked={this.state.only_rts}\n                onChange={(_, c) => this.changeRTState(c)} \n              />\n            }\n            label=\"Show only retweets (hide you own tweets)\"\n            labelPlacement=\"end\"\n          />\n\n          <FormControlLabel\n            value=\"media\"\n            control={\n              <Checkbox \n                color=\"primary\" \n                checked={this.state.pp}\n                onChange={(_, c) => this.changePPState(c)} \n              />\n            }\n            label=\"Show profile pictures\"\n            labelPlacement=\"end\"\n          />\n        </FormGroup>\n      </FormControl>\n    );\n  }\n\n  accountSettings() {\n    return (\n      <div style={{ marginBottom: 'calc(5rem + 64px)' }}>\n        <div className={classes.acc_details}>\n          <Avatar \n            alt=\"Twitter avatar\" \n            src={SETTINGS.twitter_user.profile_image_url_https.replace('_normal', '')} \n            className={classes.avatar} \n          />\n          <div className={classes.tn}>{SETTINGS.twitter_user.name}</div>\n          <div className={classes.sn}>@{SETTINGS.twitter_user.screen_name}</div>\n\n          <Button className={classes.logout} onClick={() => this.handleClickOpen()} color=\"secondary\">\n            Logout\n          </Button>\n        </div>\n\n        <div style={{display: 'flex', alignItems: 'center'}}>\n          <Typography>\n            Account created on \n            <span className=\"bold\"> {dateFormatter(\"Y-m-d\", new Date(SETTINGS.user.created_at))}</span>.\n          </Typography>\n          <Tooltip placement=\"top\" classes={{\n              tooltip: classes.big_text,\n              popper: classes.big_text\n            }} title=\"That's all the information we have from you. Archive Explorer doesn't store any other kind of data.\">\n              <IIcon className={classes.icon + \" \" + classes.account_icon} />\n          </Tooltip>\n        </div>\n\n        <ExtendedActionsMenu />\n\n        {SETTINGS.expired && <Typography className={classes.expired}>\n          Twitter credentials have expired. Please log out and log in again.\n        </Typography>}\n      </div>\n    );\n  }\n\n  handleClickOpen() {\n    this.setState({ modal_open: true });\n  }\n\n  handleClose() {\n    this.setState({ modal_open: false });\n  }\n\n  modalLogout() {\n    return (\n      <Dialog\n        open={this.state.modal_open}\n        onClose={() => this.handleClose()}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">Logout</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            Do you want to log out ? You can't use this application again until you're logged in again.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => this.handleClose()} color=\"primary\" autoFocus>\n            Cancel\n          </Button>\n          <Button onClick={() => SETTINGS.logout(true, true)} color=\"secondary\">\n            Logout\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {this.modalLogout()}\n        <AppBar position=\"static\">\n          <Toolbar>\n            <Typography variant=\"h6\" color=\"inherit\">\n              Settings\n            </Typography>\n          </Toolbar>\n        </AppBar>\n\n        <Container maxWidth=\"lg\" className={classes.root}>\n          <Typography variant=\"h4\" className=\"bold\">\n            Tweet view\n          </Typography>\n          <Container>\n            {this.tweetViewSettings()}\n          </Container>\n\n          {/* <Divider className=\"divider-big-margin\" /> */}\n\n          <Typography variant=\"h4\" className={classes.account_title}>\n            Account\n          </Typography>\n          <Container className={classes.account_container}>\n            {this.accountSettings()}\n          </Container>\n        </Container>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport classes from './NoGDPR.module.scss';\nimport { CenterComponent } from '../../../tools/PlacingComponents';\nimport { Typography, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\n\n// STEPS IMG\nimport step2 from '../../../assets/steps/2.png';\nimport step3 from '../../../assets/steps/3.png';\nimport step4 from '../../../assets/steps/4.png';\nimport step5 from '../../../assets/steps/5.png';\nimport step6 from '../../../assets/steps/6.png';\nimport step7 from '../../../assets/steps/7.png';\nimport step8 from '../../../assets/steps/8.png';\n\nexport default class NoGDPR extends React.Component<{ icon: any, message?: string }, { open: boolean }> {\n  state = {\n    open: false\n  };\n\n  closeModal() {\n    this.setState({ open: false });\n  }\n\n  openModal() {\n    this.setState({ open: true });\n  }\n\n  downloadGDPRText() {\n    return (\n      <div>\n        <Typography className={classes.steptitle}>\n          1 - Log in on <a href=\"https://twitter.com\" target=\"_blank\" rel=\"noopener noreferrer\">Twitter.com</a>.\n        </Typography>\n\n        <Typography className={classes.steptitle}>\n          2 - Click on the three dots, \"More\", right above the tweet button.\n        </Typography>\n\n        <img className={classes.step} alt=\"Step\" src={step2} />\n\n        <Typography className={classes.steptitle}>\n          3 - Select \"Settings and privacy\".\n        </Typography>\n\n        <img className={classes.step} alt=\"Step\" src={step3} />\n\n        <Typography className={classes.steptitle}>\n          4 - On the newly appeared menu, choose \"Privacy and safety\".\n        </Typography>\n\n        <img className={classes.step} alt=\"Step\" src={step4} />\n\n        <Typography className={classes.steptitle}>\n          5 - Scroll at the end of the container, and click on \"Personalization and data\".\n        </Typography>\n\n        <img className={classes.step} alt=\"Step\" src={step5} />\n\n        <Typography className={classes.steptitle}>\n          6 - Again, scroll until the end and select \"See your Twitter data\".\n        </Typography>\n\n        <img className={classes.step} alt=\"Step\" src={step6} />\n\n        <Typography className={classes.steptitle}>\n          7 - You should see a password input. Enter your password and click \"Confirm\".\n        </Typography>\n\n        <img className={classes.step} alt=\"Step\" src={step7} />\n\n        <Typography className={classes.steptitle}>\n          8 - You can now click on the first \"Request data\" button.\n        </Typography>\n\n        <img className={classes.step} style={{height: '150px'}} alt=\"Step\" src={step8} />\n\n        <DialogContentText>\n          Link will come into your mailbox. \n          It may time some times (up to several days) to generate. \n          Please be patient.\n        </DialogContentText>\n      </div>\n    );\n  }\n\n  render() {\n    const Icon = this.props.icon;\n\n    return (\n      <div>\n        {/* Dialog download */}\n        <Dialog\n          open={this.state.open}\n          onClose={() => this.closeModal()}\n          scroll=\"body\"\n        >\n          <DialogTitle id=\"scroll-dialog-title\">Download GDPR archive</DialogTitle>\n          <DialogContent>\n            {this.downloadGDPRText()}\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => this.closeModal()} color=\"primary\">\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        {/* Real component, text */}\n        <div className=\"center-absolute\">\n          <CenterComponent className={classes.text_lighten}>\n            <Icon className={classes.icon} />\n\n            <Typography variant=\"h4\" style={{marginTop: \"1rem\", marginBottom: \".7rem\", textAlign: 'center'}}>\n              GDPR archive is required\n            </Typography>\n\n            {this.props.message && <Typography variant=\"h6\">\n              {this.props.message}\n            </Typography>}\n\n            <Typography variant=\"h6\">\n              Please load an valid GDPR archive in <Link to=\"/\" className={classes.link}>\n                <Typography variant=\"inherit\" color=\"primary\">\n                  Archive page\n                </Typography>\n              </Link>.\n            </Typography>\n\n            <div style={{marginTop: \"1rem\"}}>\n              <Button color=\"primary\" onClick={() => this.openModal()}>How to download an GDPR archive ?</Button>\n            </div>\n          </CenterComponent>\n        </div>\n      </div>\n    )\n  }\n}\n","import classes from './DM.module.scss';\nimport React from 'react';\nimport { LinkedDirectMessage } from 'twitter-archive-reader';\nimport SETTINGS from '../../../tools/Settings';\nimport { Avatar, Dialog } from '@material-ui/core';\nimport UserCache from '../../../classes/UserCache';\nimport { dateFormatter } from '../../../helpers';\n\ntype DMProp = {\n  msg: LinkedDirectMessage;\n  showPp?: boolean;\n  showDate?: boolean;\n  onClick?: (id: string) => void;\n  selected?: boolean;\n}\n\ntype DMState = {\n  img: string;\n  img_full: boolean;\n};\n\nexport default class DM extends React.Component<DMProp, DMState> {\n  registered_urls: {[url: string]: string} = {};\n\n  state: DMState = {\n    img: null,\n    img_full: false\n  };\n\n  renderModal() {\n    const used_entity = this.state.img;\n\n    return (\n      <Dialog classes={\n        {paper: classes.paper}\n      } onClose={() => this.setState({ img_full: null })} open={true}>\n        <img alt=\"Full\" src={used_entity} className={classes.full_img} />\n      </Dialog>\n    );\n  }\n\n  get is_you() {\n    return this.props.msg.senderId === SETTINGS.archive.owner;\n  }\n\n  get dm() {\n    return this.props.msg;\n  }\n\n  get is_group() {\n    return this.dm.recipientId === \"0\";\n  }\n\n  generateText() {\n    const media = this.state.img;\n    const text = this.dm.text.replace(/&gt;/g, '>').replace(/&lt;/g, '<');\n\n    return (\n      <div className={classes.text}>\n          {media && <img className={classes.img} src={media} onClick={() => this.setState({ img_full: true })} />}\n          {text}\n      </div>\n    )\n  }\n\n  componentDidMount() {\n    const media = this.dm.mediaUrls[0];\n\n    if (media) {\n      SETTINGS.archive.dmImageFromUrl(media, this.is_group)\n        .then(blob => {\n          this.setState({\n            img: this.registered_urls[media] = URL.createObjectURL(blob)\n          });\n        });\n    }\n  }\n\n  componentWillUnmount() {\n    Object.values(this.registered_urls).map(u => URL.revokeObjectURL(u));\n  }\n\n  showDate() {\n    return <div className={classes.date}>{dateFormatter('Y-m-d, H:i', this.props.msg.createdAtDate)}</div>;\n  }\n  \n  onDmClick = () => {\n    if (this.props.onClick) {\n      this.props.onClick(this.dm.id);\n    }\n  };\n\n  render() {\n    const user = UserCache.getFromCache(this.props.msg.senderId);\n\n    return (\n      <div className={classes.position + \" \" + (this.is_you ? classes.you : \"\")}>\n        <div className={classes.root + \n          \" \" + (this.is_you ? classes.root_you : classes.root_other) +\n          \" \" + (this.props.showPp ? classes.marginT : \"\")}>\n          \n          {this.props.showPp && <Avatar \n            className={classes.avatar} \n            src={user ? user.profile_image_url_https.replace('_normal', '') : undefined}\n          >\n            {user ? \"\" : \"#\"}\n          </Avatar>}\n          \n          <div \n            className={classes.msg + \n              \" \" + (this.is_you ? classes.msg_you : classes.msg_other) +\n              \" \" + (!this.props.showPp ? classes.no_img : \"\") + \n              \" \" + (this.props.onClick ? classes.pointer : \"\") + \n              \" \" + (this.props.selected ? classes.msg_selected : \"\")\n            }\n            onClick={this.onDmClick}\n          >\n            {this.generateText()}\n\n            {this.props.showDate && this.showDate()}\n          </div>\n        </div>\n\n        {this.state.img_full && this.renderModal()}\n      </div>\n    )\n  }\n}\n","import React from 'react';\n\ntype SProps = {\n  onVisible: () => void;\n  triggerMore: boolean;\n};\n\ntype SState = {\n  canLoadMore: boolean;\n  inLoad: boolean;\n}\n\nexport default class Sentinel extends React.Component<SProps, SState> {\n  state: SState = {\n    canLoadMore: true,\n    inLoad: false\n  };\n\n  ref = React.createRef<HTMLDivElement>();\n\n  componentDidMount() {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.intersectionRatio === 1) {\n          if (this.state.canLoadMore) {\n            this.setState({\n              canLoadMore: false,\n              inLoad: true\n            });\n\n            this.props.onVisible();\n          }\n        }\n      },\n      {\n        root: null,\n        rootMargin: '0px',\n        threshold: 1\n      }\n    );\n\n    if (this.ref.current) {\n      observer.observe(this.ref.current);\n    }\n  }\n\n  componentDidUpdate(old_props: SProps) {\n    if (old_props !== this.props) {\n      // props changed\n\n      this.setState({\n        canLoadMore: this.props.triggerMore,\n        inLoad: false\n      });\n    }\n  }\n\n  render() {\n    return <div ref={this.ref} style={{height: '1px', width: '100%'}} />;\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport classes from './DMContainer.module.scss';\nimport { LinkedDirectMessage } from 'twitter-archive-reader';\nimport DM from './DM';\nimport Sentinel from '../../shared/Sentinel/Sentinel';\nimport { Divider, Fab, Tooltip } from '@material-ui/core';\nimport { uppercaseFirst, getMonthText } from '../../../helpers';\n// TODO CHANGE ICON\nimport JumpToIcon from '@material-ui/icons/LowPriority';\n\nconst LOADED_PER_CHUNK = 100;\n\ntype DMProps = {\n  messages: LinkedDirectMessage[];\n  from?: string;\n  onDmClick?: (id: string) => void;\n};\n\ntype DMState = {\n  page: LinkedDirectMessage[];\n};\n\nexport default class DMContainer extends React.Component<DMProps, DMState> {\n  current_page_bottom = 0;\n  current_page_top = 0;\n  has_bottom = true;\n  has_top = true;\n  dm_cache: { [id: string]: JSX.Element } = {};\n  dm_refs: { [id: string]: React.RefObject<DM> } = {};\n\n  state: DMState;\n\n  constructor(props: DMProps) {\n    super(props);\n\n    if (this.props.from) {\n      let page = 0;\n\n      // Découpage des pages\n      const pages: LinkedDirectMessage[][] = [];\n      let current = this.getPage(page);\n      pages.push(current);\n\n      while (current.length) {\n        current = this.getPage(++page);\n        pages.push(current);\n      }\n\n      // Search for page\n      const index = pages.findIndex(msgs => msgs.findIndex(msg => msg.id === this.props.from) !== -1);\n\n      if (index !== -1) {\n        this.current_page_bottom = this.current_page_top = index;\n      }\n      else {\n        this.current_page_bottom = this.current_page_top = 0;\n      }\n    }\n\n    this.state = {\n      page: this.getPage(this.current_page_bottom)\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.from) {\n      this.scrollToDm(this.props.from);\n    }\n  }\n\n  getPage(current: number) {\n    const start = current * LOADED_PER_CHUNK;\n    const end = start + LOADED_PER_CHUNK;\n\n    return this.props.messages.slice(start, end);\n  }\n\n  scrollToSelected = () => {\n    const id = this.props.from;\n\n    if (id) {\n      this.scrollToDm(id);\n    }\n  }\n\n  nextPage = () => {\n    this.current_page_bottom++;\n\n    const msgs = this.getPage(this.current_page_bottom);\n\n    if (!msgs.length) {\n      this.has_bottom = false;\n    }\n\n    let next_page = [...this.state.page, ...msgs];\n\n    this.setState({\n      page: next_page\n    });\n  };\n\n  backPage = () => {\n    // Get the current top message\n    const dm_top_id = this.state.page[0].id;\n    \n    this.current_page_top--;\n\n    if (this.current_page_top < 0) {\n      this.has_top = false;\n      const p = this.state.page;\n      this.setState({\n        page: p\n      });\n      return;\n    }\n\n    const msgs = this.getPage(this.current_page_top);\n\n    if (!msgs.length) {\n      this.has_top = false;\n    }\n\n    this.setState({\n      page: [...msgs, ...this.state.page]\n    });\n\n    this.scrollToDm(dm_top_id);\n  };\n\n  scrollToDm(id: string) {\n    // Get element\n    const dm_top = this.dm_refs[id];\n\n    if (dm_top) {\n      const el = ReactDOM.findDOMNode(dm_top.current);\n\n      setTimeout(() => {\n        if (el) {\n          (el as HTMLElement).scrollIntoView({ block: \"center\", inline: \"nearest\" });\n        }\n      }, 5);\n    }\n  }\n\n  render() {\n    const showed = this.state.page;\n\n    let last_owner = \"\";\n\n    return <div className={classes.root}>\n      <Sentinel onVisible={this.backPage} triggerMore={this.has_top} />\n\n      {showed.map((e, i) => {        \n        const actual = last_owner;\n        last_owner = e.senderId;\n\n        const future = showed[i + 1];\n        const previous = showed[i - 1];\n        let divider: JSX.Element = undefined;\n        let show_date = false;\n        // Si ça fait plus de 1 jour depuis le message précédent\n        if (previous && previous.createdAtDate.getTime() < e.createdAtDate.getTime() - (1000 * 60 * 60 * 24)) {\n          divider = <div className={classes.divider}>\n            <Divider className=\"divider-big-margin\" />\n            <div className={classes.divider_text}>\n              {\n                uppercaseFirst(getMonthText(String(e.createdAtDate.getMonth() + 1)))\n              } {e.createdAtDate.getDate()}, {e.createdAtDate.getFullYear()}\n            </div>\n          </div>;\n        }\n\n        // Cache uniquement les messages techniquement non visibles\n        if (i > 30 && (i - 30) < showed.length && e.id in this.dm_cache) {\n          return (divider ? \n            <div key={\"divider\" + e.id}>\n              {divider} {this.dm_cache[e.id]}\n            </div> : \n            this.dm_cache[e.id]\n          );\n        }\n\n        // Si ça fait plus de 5 minutes ou si on change de pertsonne\n        if (!future || e.senderId !== future.senderId || future.createdAtDate.getTime() > e.createdAtDate.getTime() + (1000 * 60 * 5)) {\n          show_date = true;\n        }\n\n        this.dm_cache[e.id] = <DM \n          key={e.id} \n          msg={e} \n          showPp={last_owner !== actual} \n          showDate={show_date} \n          onClick={this.props.onDmClick} \n          selected={this.props.from === e.id}\n          ref={this.dm_refs[e.id] = React.createRef<DM>()}\n        />;\n\n        return (divider ? \n          <div key={\"divider\" + e.id}>\n            {divider} {this.dm_cache[e.id]}\n          </div> : \n          this.dm_cache[e.id]\n        );\n      })}\n\n      <Sentinel onVisible={this.nextPage} triggerMore={this.has_bottom} />\n\n      {this.props.from && <Tooltip \n        classes={{\n          tooltip: classes.big_text,\n          popper: classes.big_text\n        }} \n        title=\"Jump to selected message\"\n        placement=\"left\"\n      >\n        <Fab color=\"primary\" className={classes.fab_jump} onClick={this.scrollToSelected}>\n          <JumpToIcon />\n        </Fab>\n      </Tooltip>}\n    </div>;\n  }\n}\n","import React, { ChangeEvent, FormEvent } from 'react';\nimport classes from './DMConversation.module.scss';\nimport { Conversation, LinkedDirectMessage } from 'twitter-archive-reader';\nimport { Divider, ExpansionPanel as MuiExpansionPanel, ExpansionPanelSummary, Typography, ExpansionPanelDetails, List, ListItem, ListItemText, TextField, Fab } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { CenterComponent } from '../../../tools/PlacingComponents';\nimport LeftArrowIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { uppercaseFirst, getMonthText, specialJoin } from '../../../helpers';\nimport DMContainer from './DMContainer';\nimport { withStyles } from '@material-ui/styles';\nimport UserCache from '../../../classes/UserCache';\nimport ResponsiveDrawer from '../../shared/RespDrawer/RespDrawer';\n\nconst ExpansionPanel = withStyles({\n  root: {\n    borderTop: '1px solid rgba(0, 0, 0, .125)',\n    borderBottomLeftRadius: '0 !important',\n    borderBottomRightRadius: '0 !important',\n    boxShadow: 'none',\n    '&:not(:last-child)': {\n      borderBottom: 0,\n    },\n    '&:before': {\n      display: 'none',\n    },\n    '&$expanded': {\n      margin: '0 !important',\n    },\n  },\n  expanded: {},\n})(MuiExpansionPanel);\n\ntype DMProps = {\n  conversation: Conversation;\n  getBack: () => void;\n};\n\ntype DMState = {\n  selected: LinkedDirectMessage[] | null;\n  month: string;\n  key: string;\n  mobileOpen: boolean;\n  found: LinkedDirectMessage[] | null;\n  from: string | null;\n};\n\nexport default class DMConversation extends React.Component<DMProps, DMState> {\n  state: DMState = {\n    selected: null,\n    month: \"\",\n    key: \"\",\n    mobileOpen: false,\n    found: null,\n    from: null\n  };\n\n  protected searchContent: string;\n\n  protected index = this.props.conversation.index;\n\n  get conv() {\n    return this.props.conversation;\n  }\n\n  handleDrawerToggle = () => {\n    this.setState({\n      mobileOpen: !this.state.mobileOpen\n    });\n  }\n\n  handleSearchChange = (event: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    this.searchContent = event.target.value;\n  };\n\n  handleDmClick = (id: string) => {\n    const msg = this.conv.single(id);\n\n    if (msg) {\n      this.monthClicker(\"*\", \"\", id);\n    }\n  };\n\n  findMsgs = (event?: FormEvent<HTMLFormElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    // Reset scroll position\n    window.scrollTo(0, 0);\n\n    const msgs = this.conv.find(new RegExp(this.searchContent, \"i\"));\n\n    // Change selected\n    this.setState({\n      found: msgs.all,\n      key: String(Math.random()),\n      from: null,\n      month: \"\",\n      mobileOpen: false,\n      selected: null,\n    });\n\n    return false;\n  };\n\n  listOfYears() {\n    const a = this.conv.raw_index;\n\n    const years_sorted = Object.keys(a).sort((a, b) => Number(b) - Number(a));\n\n    return (\n      <div>\n        <ListItem \n          button \n          className={classes.back_btn} \n          onClick={this.props.getBack}\n        >\n          <ListItemText classes={{ primary: classes.get_back_paper }}>\n            <LeftArrowIcon className={classes.get_back_icon} /> <span>Back to conversations</span>\n          </ListItemText>\n        </ListItem>\n\n        <ExpansionPanel expanded={false}>\n          <ExpansionPanelSummary>\n            <Typography className=\"bold\">Full conversation</Typography>\n          </ExpansionPanelSummary>\n        </ExpansionPanel>\n        <ListItem \n          button \n          className={\"*\" === this.state.month ? classes.selected_month : \"\"} \n          onClick={() => this.monthClicker(\"*\", \"\")}\n        >\n          <ListItemText className={classes.drawer_month}>\n            All ({this.conv.length})\n          </ListItemText>\n        </ListItem>\n\n        {years_sorted.map(y => this.year(y))}\n\n        <ListItem \n          className={classes.search_input}\n        >\n          <form onSubmit={this.findMsgs} className={classes.full_w}>\n            <TextField\n              label=\"Find DMs\"\n              className={classes.textField}\n              onChange={this.handleSearchChange}\n              margin=\"normal\"\n            />\n          </form>\n        </ListItem>\n\n        <ListItem \n          button \n          className={classes.search_btn} \n          onClick={() => this.findMsgs()}\n        >\n          <ListItemText classes={{ primary: classes.get_back_paper + \" \" + classes.search_paper }}>\n            <SearchIcon className={classes.get_back_icon} /> <span>Find messages</span>\n          </ListItemText>\n        </ListItem>\n      </div>\n    );\n  }\n\n  noMonthSelected() {\n    return (\n      <CenterComponent className={classes.no_msg}>\n        <LeftArrowIcon className={classes.icon} />\n        <Typography variant=\"h5\" style={{marginTop: \"1rem\", marginBottom: \".7rem\"}}>\n          Select a month\n        </Typography>\n\n        <Typography variant=\"h6\">\n          Choose a month to see your direct messages.\n        </Typography>\n      </CenterComponent>\n    );\n  }\n\n  noSearchResults() {\n    return (\n      <CenterComponent className={classes.no_msg}>\n        <SearchIcon className={classes.icon} />\n        <Typography variant=\"h5\" style={{marginTop: \"1rem\", marginBottom: \".7rem\"}}>\n          Not found\n        </Typography>\n\n        <Typography variant=\"h6\">\n          Your search hasn't returned any result.\n        </Typography>\n      </CenterComponent>\n    );\n  }\n\n  year(year: string) {\n    return (\n      <ExpansionPanel key={\"year\" + year}>\n        <ExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n        >\n          <Typography>\n            <span className=\"bold\">{year}</span> <span className={classes.year_count}>({this.index.years[year].count})</span>\n          </Typography>\n        </ExpansionPanelSummary>\n        <ExpansionPanelDetails style={{padding: '0'}}>\n          {this.listOfMonths(year)}\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    )\n  }\n\n  monthClicker(year: string, month: string, from: string | null = null) {\n    // Reset scroll position\n    window.scrollTo(0, 0);\n\n    this.setState({\n      selected: year === \"*\" ? this.conv.all : this.conv.month(month, year).all,\n      month: year === \"*\" ? \"*\" : year + \"-\" + month,\n      key: String(Math.random()),\n      mobileOpen: false,\n      found: null,\n      from\n    });\n  }\n\n  listOfMonths(year: string) {\n    const current_year = this.index.years[year];\n\n    return (\n      <List className={classes.list_month}>\n        {Object.entries(current_year.months).map(([month, dms]) => (\n          <ListItem \n            button \n            key={year + \"-\" + month} \n            className={year + \"-\" + month === this.state.month ? classes.selected_month : \"\"} \n            onClick={() => this.monthClicker(year, month)}\n          >\n            <ListItemText className={classes.drawer_month}>\n              {getMonthText(month)} ({dms.count})\n            </ListItemText>\n          </ListItem>\n        ))}\n      </List>\n    )\n  }\n\n  showHeaderConv() {\n    // Existe uniquement si c'est une conversation simple\n    // et que l'utilisateur est en cache\n    const p = [...this.conv.real_participants][0];\n    const user = UserCache.getFromCache(p);\n\n    if (user && !this.conv.is_group_conversation) {\n      return (\n        <img className={classes.conv_header_img} src={user.profile_banner_url} />\n      );\n    }\n  }\n\n  showActiveMonth() {\n    let month_text = \"All messages\";\n    let year = \"\";\n\n    if (this.state.month !== \"*\") {\n      const [_year, month] = this.state.month.split('-');\n      year = _year;\n      month_text = uppercaseFirst(getMonthText(month));\n    }\n    const msg_number = this.state.selected.length;\n\n    return (\n      <div className={classes.month_header}>\n        {month_text} {year} <span className={classes.month_msg_number}>\n          <span className=\"bold\">{msg_number}</span> message{msg_number > 1 ? \"s\" : \"\"}\n        </span>\n      </div>\n    );\n  }\n\n  showActiveSearch() {\n    let month_text = \"Search results\";\n    const msg_number = this.state.found.length;\n\n    return (\n      <div className={classes.month_header}>\n        {month_text} <span className={classes.month_msg_number}>\n          <span className=\"bold\">{msg_number}</span> message{msg_number > 1 ? \"s\" : \"\"}\n        </span>\n      </div>\n    );\n  }\n\n  drawer() {\n    return (\n      <div>\n        <div className={classes.toolbar} />\n        <Divider />\n        {this.listOfYears()}\n      </div>\n    );\n  }\n\n  content() {\n    if (this.state.found) {\n      return (\n        <div>\n          {this.showHeaderConv()}\n\n          <div className={classes.inner_content}>\n            {this.state.found && this.state.found.length ? \n              (<div>\n                {this.showActiveSearch()}\n                <DMContainer key={this.state.key} messages={this.state.found} onDmClick={this.handleDmClick} />\n              </div>) :\n              this.noSearchResults()\n            }\n          </div>\n        </div>\n      );\n    }\n    else {\n      return (\n        <div>\n          {this.showHeaderConv()}\n\n          <div className={classes.inner_content}>\n            {this.state.selected ? \n              (<div>\n                {this.showActiveMonth()}\n                <DMContainer key={this.state.key} messages={this.state.selected} from={this.state.from} />\n              </div>) :\n              this.noMonthSelected()\n            }\n          </div>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <ResponsiveDrawer\n        handleDrawerToggle={this.handleDrawerToggle}\n        mobileOpen={this.state.mobileOpen}\n        title={\"Conversation with \" + this.participants}\n        noPadding\n        drawer={this.drawer()}\n        content={this.content()}\n      />\n    );\n  }\n\n  get participants() {\n    const names = [...this.conv.real_participants]\n      .map(e => {\n        const user = UserCache.getFromCache(e);\n        return user ? user.name : '#' + e;\n      });\n\n    return specialJoin(names);\n  }\n}\n","import React from 'react';\nimport classes from './DirectMessages.module.scss';\nimport { setPageTitle, isArchiveLoaded, specialJoin } from '../../../helpers';\nimport MailIcon from '@material-ui/icons/Mail';\nimport SETTINGS from '../../../tools/Settings';\nimport NoArchive from '../../shared/NoArchive/NoArchive';\nimport NoGDPR from '../../shared/NoGDPR/NoGDPR';\nimport { Conversation } from 'twitter-archive-reader';\nimport DMConversation from '../DMConversation/DMConversation';\nimport { Toolbar, AppBar, Typography, Container, Card, CardContent, Avatar, Tabs, Tab } from '@material-ui/core';\nimport UserCache from '../../../classes/UserCache';\nimport { CenterComponent, BigPreloader, specialJoinJSX } from '../../../tools/PlacingComponents';\nimport EmptyMessage from '../../shared/EmptyMessage/EmptyMessage';\nimport MailOutlineIcon from '@material-ui/icons/MailOutline';\nimport { FullUser } from 'twitter-d';\n\ntype DMProps = {\n\n};\n\ntype DMState = {\n  /** Selected conversation */\n  conversation: Conversation | null;\n\n  /** Wait for user download */\n  ready: boolean;\n\n  /** Tab for group/non group */\n  active_tab: number;\n};\n\nexport default class DirectMessages extends React.Component<DMProps, DMState> {\n  state: DMState = {\n    conversation: null,\n    ready: false,\n    active_tab: 0,\n  };\n\n  protected position: number = 0;\n  protected should_scroll = false;\n\n  componentDidMount() {\n    setPageTitle(\"Direct messages\");\n\n    if (isArchiveLoaded() && SETTINGS.archive.is_gdpr) {\n      const participants = new Set<string>();\n\n      for (const conv of SETTINGS.archive.messages.all) {\n        for (const p of conv.participants) {\n          participants.add(p);\n        }\n      }\n\n      UserCache.bulk([...participants])\n        .finally(() => {\n          this.setState({\n            ready: true\n          });\n        });\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.should_scroll) {\n      this.should_scroll = false;\n      window.scrollTo(0, this.position);\n    }\n  }\n\n  handleRemoveConversation = () => {\n    this.should_scroll = true;\n    this.setState({ conversation: null });\n  };\n\n  handleGetConv = (conv: Conversation) => {\n    this.setState({\n      conversation: conv\n    });\n\n    this.position = window.scrollY;\n    this.should_scroll = false;\n  };\n\n  renderConversation(conv: Conversation) {\n    const participants = [...conv.real_participants].map(e => {\n      const cached = UserCache.getFromCache(e);\n\n      if (cached) {\n        return cached;\n      }\n      return e;\n    });\n\n    const oncardclick = () => this.handleGetConv(conv);\n\n    if (participants.length === 1) {\n      let avatar: JSX.Element;\n      const p = participants[0];\n\n      if (typeof p !== 'string') {\n        avatar = <Avatar \n          className={classes.avatar}\n          src={(p as FullUser).profile_image_url_https.replace('_normal', '')}\n        />;\n      }\n      else {\n        avatar = <Avatar className={classes.avatar}>#</Avatar>;\n      }\n\n      const name = typeof p === \"string\" ? \"#\" + p : p.name;\n      const s_name = typeof p === \"string\" ? \"\" : \"@\" + p.screen_name;\n\n      return (\n        <Card key={conv.id} className={classes.card_root} onClick={oncardclick}>\n          <CardContent className={classes.card_single}>\n            <div className={classes.avatar_holder}>\n              {avatar}\n\n              <div className={classes.conv_name}>{name}</div>\n              <div className={classes.conv_screen_name}>{s_name}</div>\n            </div>\n\n            <div className={classes.messages_number}>\n              <span className=\"bold\">{conv.length}</span> message{conv.length > 1 ? \"s\" : \"\"}\n            </div>\n          </CardContent>\n        </Card>\n      );\n    }\n\n    const s_n = specialJoinJSX(participants.map(e => typeof e === 'string' ? \"#\" + e : '@' + e.screen_name), { class_element: \"bold\" });\n    const names = specialJoinJSX(participants.map(e => typeof e === 'string' ? \"#\" + e : e.name));\n\n    return (\n      <Card key={conv.id} className={classes.card_root} onClick={oncardclick}>\n        <CardContent>\n          <div className={classes.group_conv_container}>\n            <div className={classes.group_conv}><span className=\"no-bold\">Conversation with</span> {names}</div>\n            <div className={classes.group_conv_screen_name}>{s_n}</div>\n          </div>\n\n          <div className={classes.messages_number}>\n            <span className=\"bold\">{conv.length}</span> message{conv.length > 1 ? \"s\" : \"\"}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  changeActiveTab = (_: any, index: number) => {\n    this.setState({\n      active_tab: index\n    });\n  }\n\n  renderConversations() {\n    const messages = SETTINGS.archive.messages;\n    const sort_fn = (a: Conversation, b: Conversation) => b.length - a.length;\n\n    if (messages.all.length === 0) {\n      return <EmptyMessage \n        main=\"No conversations\" \n        second=\"You must have at least one conversation to explore your DMs.\" \n        icon={MailOutlineIcon}\n      />;\n    }\n\n    const groups = messages.groups.sort(sort_fn);\n    const singles = messages.directs.sort(sort_fn);\n\n    return (\n      <div>\n        <AppBar position=\"static\" className={classes.tabs}>\n          <Tabs value={this.state.active_tab} onChange={this.changeActiveTab} centered>\n            <Tab label=\"Conversations\" disabled={singles.length === 0} />\n            <Tab label=\"Group conversations\" disabled={groups.length === 0} />\n          </Tabs>\n        </AppBar>\n\n        <Container className={classes.root}>\n          {this.state.active_tab === 0 && <div>\n            <Typography className={classes.conv_title} variant=\"h6\"> \n              Conversations\n            </Typography>\n\n            <div className={classes.conv_container}>\n              {singles.map(e => this.renderConversation(e))}\n            </div>\n          </div>}\n\n          {this.state.active_tab === 1 && <div>\n            <Typography className={classes.conv_title} variant=\"h6\"> \n              Group conversations\n            </Typography>\n\n            <div className={classes.conv_container}>\n              {groups.map(e => this.renderConversation(e))}\n            </div>\n          </div>}\n        </Container>        \n      </div>\n    );\n  }\n\n  get participants() {\n    const names = [...this.state.conversation.real_participants]\n      .map(e => {\n        const user = UserCache.getFromCache(e);\n        return user ? user.name : '#' + e;\n      });\n\n    return specialJoin(names);\n  }\n\n  render() {\n    if (!isArchiveLoaded()) {\n      return <NoArchive />;\n    }\n\n    if (!SETTINGS.archive.is_gdpr) {\n      return <NoGDPR \n        icon={MailIcon} \n        message=\"Loaded archive does not support direct messages.\" \n      />;\n    }\n\n    if (this.state.ready && this.state.conversation) {\n      return (\n        <DMConversation \n          getBack={this.handleRemoveConversation} \n          conversation={this.state.conversation} \n        />\n      );\n    }\n\n    return (\n      <div>\n        <AppBar position=\"static\">\n          <Toolbar>\n            <Typography variant=\"h6\" noWrap>\n              Direct Messages\n            </Typography>\n          </Toolbar>\n        </AppBar>\n          {!this.state.ready && <Container className={classes.root}>\n            <CenterComponent className={classes.preloader}>\n              <BigPreloader />\n\n              <div className={classes.preloader_msg}>\n                Loading user details\n              </div>\n            </CenterComponent>\n          </Container> }\n\n          {this.state.ready && this.renderConversations()}\n      </div>\n    );\n  }\n}\n","import React, { KeyboardEvent } from 'react';\nimport ReactDOM from 'react-dom';\nimport classes from './Search.module.scss';\nimport { setPageTitle, isArchiveLoaded, escapeRegExp } from '../../../helpers';\nimport NoArchive from '../../shared/NoArchive/NoArchive';\nimport { AppBar, Toolbar, Typography, Card, CardContent, TextField, FormControl, FormGroup, FormControlLabel, Checkbox, Divider, FormLabel, RadioGroup, Radio, IconButton } from '@material-ui/core';\nimport { PartialTweet, TweetSearcher } from 'twitter-archive-reader';\nimport SETTINGS from '../../../tools/Settings';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport TweetViewer from '../../shared/TweetViewer/TweetViewer';\nimport { toast } from '../../shared/Toaster/Toaster';\n\ntype SearchState = {\n  searched: PartialTweet[];\n  search_modal: boolean;\n  c_i: boolean;\n  regex: boolean;\n  sort_reverse_chrono: boolean;\n};\n\nexport default class Search extends React.Component<{}, SearchState> {\n  state: SearchState;\n\n  constructor(props: {}) {\n    super(props);\n\n    this.state = {\n      searched: null,\n      search_modal: true,\n      c_i: true,\n      regex: false,\n      sort_reverse_chrono: SETTINGS.sort_reverse_chrono,\n    };\n\n    this.handleKeyPress = this.handleKeyPress.bind(this);\n  }\n\n  handleKeyPress(event: KeyboardEvent<HTMLDivElement>) {\n    if (event.key === 'Enter' && this.state.search_modal){\n      this.startSearch(this.getTextSearch());\n    }\n  }\n\n  handleButtonClick() {\n    this.startSearch(this.getTextSearch());\n  }\n\n  componentDidMount() {\n    setPageTitle(\"Search\");\n  }\n\n  startSearch(query: string) {\n    if (this.state.c_i && !this.state.regex) {\n      query = escapeRegExp(query);\n    }\n\n    if (query) {\n      try {\n        const found = TweetSearcher.search(SETTINGS.archive.all, query, this.state.c_i ? \"i\" : this.state.regex);\n  \n        this.setState({\n          searched: found,\n          search_modal: false\n        });\n      } catch (e) {\n        console.log(typeof e, e instanceof Error, e.message)\n        const msg = (e as Error).message;\n        const operator = msg.split('Invalid query')[0].trim();\n\n        toast(`Error: Invalid query for operator \"${operator}\"`, \"error\");\n      }\n    }\n  }\n\n  onRegexChange(v: boolean) {\n    this.setState({\n      regex: v\n    });\n  }\n\n  onCIChange(v: boolean) {\n    this.setState({\n      c_i: v\n    });\n  }\n\n  onSortChange(v: string) {\n    if (v === \"reverse\") {\n      this.setState({\n        sort_reverse_chrono: true\n      });\n      SETTINGS.sort_reverse_chrono = true;\n    }\n    else {\n      this.setState({\n        sort_reverse_chrono: false\n      });\n      SETTINGS.sort_reverse_chrono = false;\n    }\n  }\n\n  parameters() {\n    return (\n      <div className={classes.checkboxes}>\n        <FormControl component=\"fieldset\" className={classes.form_control}>\n          <FormGroup>\n            <FormControlLabel\n              control={<Checkbox checked={this.state.regex} onChange={(_, c) => this.onRegexChange(c)} value=\"gilad\" />}\n              label=\"Use a regular expression\"\n            />\n          </FormGroup>\n        </FormControl>\n\n        <FormControl component=\"fieldset\" className={classes.form_control}>\n          <FormGroup>\n            <FormControlLabel\n              control={<Checkbox checked={this.state.c_i} onChange={(_, c) => this.onCIChange(c)} value=\"gilad\" />}\n              label=\"Case insensitive\"\n            />\n          </FormGroup>\n        </FormControl>\n      </div>\n    );\n  }\n\n  searchModal() {\n    return (\n      <div className={classes.search_modal + \" \" + (this.state.search_modal ? classes.open : \"\")}>\n        <Card className={classes.card}>\n          <CardContent>\n            <div className={classes.search_field_wrapper}>\n              <TextField\n                label=\"Search\"\n                className={classes.text_field}\n                margin=\"normal\"\n                variant=\"outlined\"\n                id=\"search-text-field\"\n                onKeyPress={this.handleKeyPress}\n                autoComplete={\"off\"}\n              />\n              <IconButton onClick={() => this.handleButtonClick()} aria-label=\"search\" className={classes.search_btn}>\n                <SearchIcon fontSize=\"large\" />\n              </IconButton>\n            </div>\n\n            {this.parameters()}\n\n            <Divider className=\"divider-big-margin\" />\n\n            <FormControl className={classes.form_control} style={{width: '100%'}}>\n              <FormLabel component=\"legend\">Sort mode</FormLabel>\n              <RadioGroup\n                className={classes.radio_group}\n                value={this.state.sort_reverse_chrono ? \"reverse\" : \"normal\"}\n                onChange={(_, v) => this.onSortChange(v)}\n              >\n                <FormControlLabel value=\"reverse\" control={<Radio />} label=\"More recent\" />\n                <FormControlLabel value=\"normal\" control={<Radio />} label=\"Older\" />\n              </RadioGroup>\n            </FormControl>\n\n            <Divider className=\"divider-big-margin\" />\n\n            <Typography variant=\"h6\" className={classes.title_p}>\n              Search constraints\n            </Typography>\n            <div className={classes.presentation}>\n              <div>\n                <div className=\"bold\">from:</div>\n                <div className=\"bold\">since:</div>\n                <div className=\"bold\">until:</div>\n              </div>\n\n              <div>\n                <div>[twitter @]</div>\n                <div>[YYYY-MM-DD]</div>\n                <div>[YYYY-MM-DD]</div>\n              </div>\n\n              <div>\n                <div className=\"italic\">Find tweets made by specified user.</div>\n                <div className=\"italic\">Find tweets made since a specified date.</div>\n                <div className=\"italic\">Find tweets made before a specified date.</div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  arrowGetModal() {\n    return (\n      <div \n        className={classes.arrow_wrapper + \" \" + (this.state.search_modal ? classes.open : \"\")} \n        onClick={() => { this.setState({ search_modal: true }) }}\n      >\n        <ChevronRightIcon />\n      </div>\n    );\n  }\n\n  getTextSearch() {\n    const el = ReactDOM.findDOMNode(this) as Element;\n    return (el.querySelector('#search-text-field') as HTMLInputElement).value;\n  }\n\n  render() {\n    if (!isArchiveLoaded()) {\n      return <NoArchive />;\n    }\n\n    return (\n      <div>\n        <AppBar position=\"static\" className={classes.appBar}>\n          <Toolbar>\n            <Typography variant=\"h6\" noWrap>\n              Search\n            </Typography>\n          </Toolbar>\n        </AppBar>\n\n        {this.searchModal()}\n\n        {this.arrowGetModal()}\n\n        {this.state.searched !== null && !this.state.search_modal && <div className={classes.tweet_wrapper}>\n          <div className={classes.tweet_number_results}>\n            <span className={classes.tweet_number}>{this.state.searched.length}</span> results\n          </div>\n\n          <TweetViewer tweets={this.state.searched} />\n        </div>}\n      </div>\n    );\n  }\n}\n","import { BrowserRouter as Router, Route, Redirect, Switch } from \"react-router-dom\";\nimport React from 'react';\nimport Explore from \"../vues/Explore/Explore\";\nimport RouterWrapper from \"./RouterWrapper\";\nimport Archive from \"../vues/Archive/Archive\";\nimport SETTINGS from \"../../tools/Settings\";\nimport Login from \"../vues/Login/Login\";\nimport FinalizeLogin from \"../FinalizeLogin/FinalizeLogin\";\nimport NotFound from \"../shared/NotFound/NotFound\";\nimport { checkCredentials } from \"../../helpers\";\nimport { Button, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions } from \"@material-ui/core\";\nimport { BigPreloader } from \"../../tools/PlacingComponents\";\nimport Settings from \"../vues/Settings/Settings\";\nimport DirectMessages from \"../vues/DirectMessages/DirectMessages\";\nimport Search from \"../vues/Search/Search\";\n\nclass AppRouter extends React.Component {\n  state: { will_validate: boolean, validation_status: boolean | null };\n\n  protected logged = !!SETTINGS.token;\n\n  constructor(props: any) {\n    super(props);\n\n    this.state = { \n      will_validate: false,\n      validation_status: true\n    };\n  }\n\n  componentDidMount() {\n    // Si un utilisateur est enregistré et qu'on a un token\n    if (SETTINGS.user && this.logged) {\n      // un utilisateur est valide, check en arrière plan\n      this.setState({\n        will_validate: false\n      });\n\n      checkCredentials()\n        .then(is_logged => {\n          if (!is_logged) {\n            // C'est pas bon, l'utilisateur doit se déconnecter, \n            // token invalide ou API injoignable\n            this.setState({\n              validation_status: is_logged,\n              will_validate: true\n            });\n          }\n        })\n    }\n    // Processus de connexion classique \n    // (si user not defined, pas censé arrivé)\n    else if (this.logged) {\n      this.setState({\n        will_validate: true\n      });\n\n      checkCredentials()\n        .then(is_logged => {\n          if (is_logged) {\n            // Tout s'est bien passé, l'utilisateur a un token ok\n            this.setState({\n              will_validate: false\n            });\n          }\n          // C'est pas bon, l'utilisateur doit se déconnecter, \n          // token invalide ou API injoignable\n          else {\n            this.setState({\n              validation_status: is_logged\n            });\n          }\n        })\n    }\n  }\n\n  apiError() {\n    if (this.state.validation_status === false) {\n      return (\n        <div>\n          <DialogTitle>Login error</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              You credentials seems to be invalid.\n              Try to log out and log in again.\n            </DialogContentText>\n            <DialogContentText>\n              If the problem persists, try again later.\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => SETTINGS.logout()} color=\"primary\">\n              Log out\n            </Button>\n          </DialogActions>\n        </div>  \n      );\n    }\n    // null\n    else {\n      return (\n        <div>\n          <DialogTitle>Server unavailable</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              Archive Explorer could not dialog with its server-side.\n              You may be offline, or the server is temporary unavailable.\n            </DialogContentText>\n\n            <DialogContentText>\n              Try again later.\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => SETTINGS.reload()} color=\"primary\">\n              Reload\n            </Button>\n          </DialogActions>\n        </div>  \n      );\n    }\n  }\n\n  renderDialogLogin() {\n    return (\n      <Dialog\n        open={true}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        {this.state.validation_status ? \n        /* L'utilisateur doit attendre que l'API réponde */\n          <div>\n            <DialogTitle>Login in...</DialogTitle>\n            <DialogContent style={{ padding: '30px 100px' }}>\n              <BigPreloader />\n            </DialogContent>\n          </div>  \n        : \n        /* L'utilisateur n'a pas le choix: Il doit se déconnecter */\n          this.apiError()\n        }\n      </Dialog>\n    );\n  }\n\n  routerLogged() {\n    return (\n      <Router>\n        <div className=\"Router\">\n          <Switch>\n            <Route path=\"/\" exact component={Archive} />  \n            <Route path=\"/explore/\" component={Explore} />\n            <Route path=\"/settings/\" component={Settings} />  \n            <Route path=\"/dms/\" component={DirectMessages} />  \n            <Route path=\"/search/\" component={Search} />  \n            <Route component={NotFound} />\n          </Switch>\n          <RouterWrapper />\n        </div>\n      </Router>\n    );\n  }\n\n  unloggedRouter() {\n    return (\n      <Router>\n        <Route\n          render={props =>\n            props.location.pathname.startsWith('/login') ? (\n              <Login />\n            ) : (\n              props.location.pathname.startsWith('/finalize') ? \n              <FinalizeLogin {...props} />\n              : (\n                <Redirect\n                  to={{\n                    pathname: \"/login/\",\n                    state: { from: props.location }\n                  }}\n                />\n              )\n            )\n          }\n        />\n      </Router>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {this.state.will_validate && this.renderDialogLogin()}\n        {!this.state.will_validate ?\n          (this.logged ? \n            this.routerLogged() : \n            this.unloggedRouter()\n          ) :\n          \"\"\n        }\n      </div>\n    );\n  }\n}\n  \nexport default AppRouter;\n","import React from 'react';\nimport Router from '../Router/Router';\nimport './App.scss';\nimport { setPageTitle } from '../../helpers';\nimport Toaster from '../shared/Toaster/Toaster';\n\nconst App: React.FC = () => {\n  setPageTitle();\n\n  return (\n    <div className=\"App\">\n      <Router />\n      <Toaster />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as consts from './const';\nimport './index.scss';\nimport * as serviceWorker from './serviceWorker';\nimport App from './components/App/App';\n\nconsole.log(\"Archive Explorer version\", consts.VERSION);\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"big_text\":\"Settings_big_text__12dUF\",\"icon\":\"Settings_icon__2zNUN\",\"account_container\":\"Settings_account_container__2rslR\",\"root\":\"Settings_root__2HQX5\",\"account_title\":\"Settings_account_title__3pxfj\",\"account_icon\":\"Settings_account_icon__3h0oo\",\"acc_details\":\"Settings_acc_details__gtgtl\",\"logout\":\"Settings_logout__bUSRx\",\"avatar\":\"Settings_avatar__cNEnn\",\"sn\":\"Settings_sn__1q0A0\",\"tn\":\"Settings_tn__28ddi\",\"expired\":\"Settings_expired__24FxJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"QuickDelete_icon__2SxLD\",\"icon_lens\":\"QuickDelete_icon_lens__1nwU7\",\"header_container\":\"QuickDelete_header_container__R22kM\",\"starter_details\":\"QuickDelete_starter_details__s7_Z9\",\"content\":\"QuickDelete_content__3zdGZ\",\"count\":\"QuickDelete_count__317g3\",\"select_all_holder\":\"QuickDelete_select_all_holder__2BBqC\",\"buttons_month\":\"QuickDelete_buttons_month__QxGmN\",\"actions\":\"QuickDelete_actions__3ixRV\",\"to_end\":\"QuickDelete_to_end__8CnKS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app_bar\":\"TaskModal_app_bar__11cBH\",\"nav_title\":\"TaskModal_nav_title__2KrRB\",\"title\":\"TaskModal_title__2hn8q\",\"icon\":\"TaskModal_icon__2pefn\",\"no_sub_text\":\"TaskModal_no_sub_text__2Bysg\",\"loader\":\"TaskModal_loader__2BIHZ\",\"error_load\":\"TaskModal_error_load__lUsqq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"Task_details__2wUBH\",\"heading\":\"Task_heading__1c8Iu\",\"icon\":\"Task_icon__2I-HO\",\"counts\":\"Task_counts__ahy_N\",\"header_info\":\"Task_header_info__wT28H\",\"icon_green\":\"Task_icon_green__2QaNq\",\"icon_orange\":\"Task_icon_orange__pVvv7\",\"icon_purple\":\"Task_icon_purple__3muAY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Explore_root__3f77i\",\"appBar\":\"Explore_appBar__1fW5l\",\"drawer\":\"Explore_drawer__3egWf\",\"drawerPaper\":\"Explore_drawerPaper__1kmES\",\"content\":\"Explore_content__2DGVF\",\"list_month\":\"Explore_list_month__pUfOs\",\"drawer_month\":\"Explore_drawer_month__dw3g2\",\"selected_month\":\"Explore_selected_month__3hi0B\",\"no_tweets\":\"Explore_no_tweets__3JDmU\",\"icon\":\"Explore_icon__2HXSe\",\"year_count\":\"Explore_year_count__1O5fk\",\"month_header\":\"Explore_month_header__2inbg\",\"month_tweet_number\":\"Explore_month_tweet_number__2KZL_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Tweet_card__2DLzi\",\"avatar\":\"Tweet_avatar__2Fj4E\",\"retweeted\":\"Tweet_retweeted__3mObX\",\"favorited\":\"Tweet_favorited__6Af48\",\"card_action\":\"Tweet_card_action__3yWRG\",\"date\":\"Tweet_date__1lHY0\",\"link\":\"Tweet_link__2wC2M\",\"card_title\":\"Tweet_card_title__3Hnbo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"TweetMedia_root__D9WSW\",\"one\":\"TweetMedia_one__14LRH\",\"two\":\"TweetMedia_two__31L4U\",\"three\":\"TweetMedia_three__1teCT\",\"four\":\"TweetMedia_four__3SKKZ\",\"video\":\"TweetMedia_video__pgVlX\",\"full\":\"TweetMedia_full__Uy9Fy\",\"full_img\":\"TweetMedia_full_img__2QiJs\",\"paper\":\"TweetMedia_paper__1aynm\",\"img1\":\"TweetMedia_img1__tXja6\",\"img2\":\"TweetMedia_img2__1f_k8\",\"img3\":\"TweetMedia_img3__2EkKO\",\"img4\":\"TweetMedia_img4__y9SpN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"catch_phrase\":\"Login_catch_phrase__3_xfN\",\"legal_text\":\"Login_legal_text__2KvD1\",\"twitter_link\":\"Login_twitter_link__3DajU\",\"twitter_img\":\"Login_twitter_img__N7x6-\",\"underline\":\"Login_underline__3nHUY\",\"github_header\":\"Login_github_header__3-jox\",\"github_links\":\"Login_github_links__10Ok6\",\"github_container\":\"Login_github_container__2BMwb\",\"github_img\":\"Login_github_img__6HQmf\",\"github_text\":\"Login_github_text__24oqo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader_sessions\":\"ExtendedActions_loader_sessions__3-DMP\",\"details\":\"ExtendedActions_details__2lCUt\",\"dialog\":\"ExtendedActions_dialog__8XZGZ\",\"revoke_btn\":\"ExtendedActions_revoke_btn__lLTka\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"DMContainer_root__w4TTj\",\"divider_text\":\"DMContainer_divider_text__3jiSd\",\"fab_jump\":\"DMContainer_fab_jump__2b-MU\",\"big_text\":\"DMContainer_big_text__27X71\"};"],"sourceRoot":""}